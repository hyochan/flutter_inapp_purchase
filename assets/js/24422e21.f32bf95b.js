"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[7519],{2506:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"getting-started/setup-horizon","title":"Horizon OS","description":"Setup guide for Meta Quest devices running Horizon OS with Meta\'s Platform SDK for in-app purchases.","source":"@site/docs/getting-started/setup-horizon.md","sourceDirName":"getting-started","slug":"/getting-started/setup-horizon","permalink":"/flutter_inapp_purchase/docs/getting-started/setup-horizon","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/getting-started/setup-horizon.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Horizon OS"},"sidebar":"docsSidebar","previous":{"title":"Android Setup","permalink":"/flutter_inapp_purchase/docs/getting-started/android-setup"},"next":{"title":"Quick Start","permalink":"/flutter_inapp_purchase/docs/getting-started/quickstart"}}');var o=i(4848),t=i(8453);const s={sidebar_position:4,title:"Horizon OS"},l="Horizon OS Setup",d={},a=[{value:"Flutter-Specific Configuration",id:"flutter-specific-configuration",level:2},{value:"1. Add to AndroidManifest.xml",id:"1-add-to-androidmanifestxml",level:3},{value:"2. Configure Platform Selection",id:"2-configure-platform-selection",level:3},{value:"3. Enable Horizon (Optional)",id:"3-enable-horizon-optional",level:3},{value:"4. Build &amp; Run",id:"4-build--run",level:3},{value:"Code Usage",id:"code-usage",level:2},{value:"Testing on Meta Quest",id:"testing-on-meta-quest",level:2},{value:"Common Issues",id:"common-issues",level:2},{value:"Products Not Loading",id:"products-not-loading",level:3},{value:"Build Errors",id:"build-errors",level:3},{value:"Wrong Billing System",id:"wrong-billing-system",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"horizon-os-setup",children:"Horizon OS Setup"})}),"\n",(0,o.jsx)(n.p,{children:"Setup guide for Meta Quest devices running Horizon OS with Meta's Platform SDK for in-app purchases."}),"\n",(0,o.jsx)(n.p,{children:"For complete Horizon OS setup instructions including Meta Quest Developer Dashboard configuration, app setup, and testing guidelines, please visit:"}),"\n",(0,o.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.a,{href:"https://openiap.dev/docs/horizon-setup",children:"Horizon OS Setup Guide - openiap.dev"})})]}),"\n",(0,o.jsx)(n.p,{children:"The guide covers:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Meta Quest Developer Dashboard configuration"}),"\n",(0,o.jsx)(n.li,{children:"Horizon App ID setup"}),"\n",(0,o.jsx)(n.li,{children:"Product configuration"}),"\n",(0,o.jsx)(n.li,{children:"Testing with Meta Quest devices"}),"\n",(0,o.jsx)(n.li,{children:"Common troubleshooting steps"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"flutter-specific-configuration",children:"Flutter-Specific Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"1-add-to-androidmanifestxml",children:"1. Add to AndroidManifest.xml"}),"\n",(0,o.jsxs)(n.p,{children:["Add inside ",(0,o.jsx)(n.code,{children:"<application>"})," tag in ",(0,o.jsx)(n.code,{children:"android/app/src/main/AndroidManifest.xml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Meta Horizon App ID - injected by Gradle --\x3e\n<meta-data\n    android:name="com.meta.horizon.platform.ovr.HORIZON_APP_ID"\n    android:value="${HORIZON_APP_ID}" />\n'})}),"\n",(0,o.jsx)(n.h3,{id:"2-configure-platform-selection",children:"2. Configure Platform Selection"}),"\n",(0,o.jsxs)(n.p,{children:["Add to ",(0,o.jsx)(n.code,{children:"android/app/build.gradle"})," inside ",(0,o.jsx)(n.code,{children:"defaultConfig"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gradle",children:"android {\n    defaultConfig {\n        // ... other configuration ...\n\n        // Read horizonEnabled flag from gradle.properties (default: false)\n        def horizonEnabled = project.findProperty('horizonEnabled')?.toBoolean() ?: false\n        def flavor = horizonEnabled ? 'horizon' : 'play'\n\n        // Select platform flavor from plugin\n        missingDimensionStrategy 'platform', flavor\n\n        // Configure Horizon App ID if enabled\n        def localProperties = new Properties()\n        def localPropertiesFile = rootProject.file('local.properties')\n        if (localPropertiesFile.exists()) {\n            localPropertiesFile.withInputStream { localProperties.load(it) }\n        }\n        def horizonAppId = horizonEnabled ? (localProperties.getProperty(\"HORIZON_APP_ID\") ?: \"\") : \"\"\n        manifestPlaceholders = [HORIZON_APP_ID: horizonAppId]\n    }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-enable-horizon-optional",children:"3. Enable Horizon (Optional)"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"For Google Play (default)"}),": No configuration needed! Just build and run normally."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"For Meta Quest"}),": Add to ",(0,o.jsx)(n.code,{children:"android/gradle.properties"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"horizonEnabled=true\n"})}),"\n",(0,o.jsxs)(n.p,{children:["And add your Horizon App ID to ",(0,o.jsx)(n.code,{children:"android/local.properties"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"HORIZON_APP_ID=your_horizon_app_id_here\n"})}),"\n",(0,o.jsx)(n.h3,{id:"4-build--run",children:"4. Build & Run"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Google Play (default - no configuration needed)\nflutter run\nflutter build apk --release\n\n# Meta Quest (after enabling horizonEnabled=true)\nflutter run -d Quest\nflutter build apk --release\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"No flavor specification needed!"})," The plugin automatically selects the correct billing platform based on ",(0,o.jsx)(n.code,{children:"horizonEnabled"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"code-usage",children:"Code Usage"}),"\n",(0,o.jsx)(n.p,{children:"No code changes required! Use the same API:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-dart",children:"import 'package:flutter_inapp_purchase/flutter_inapp_purchase.dart';\n\n// Initialize connection\nawait FlutterInappPurchase.instance.initConnection();\n\n// Fetch products (works on both Play and Horizon)\nfinal products = await FlutterInappPurchase.instance.fetchProducts<Product>(\n  skus: ['consumable_item'],\n  type: ProductQueryType.InApp,\n);\n\n// Request purchase\nawait FlutterInappPurchase.instance.requestPurchase(sku: 'consumable_item');\n"})}),"\n",(0,o.jsx)(n.h2,{id:"testing-on-meta-quest",children:"Testing on Meta Quest"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Enable Developer Mode on Quest device"}),"\n",(0,o.jsxs)(n.li,{children:["Connect via ADB: ",(0,o.jsx)(n.code,{children:"adb devices"})]}),"\n",(0,o.jsx)(n.li,{children:"Configure test products in Meta Quest Developer Dashboard"}),"\n",(0,o.jsxs)(n.li,{children:["Run with Horizon flavor: ",(0,o.jsx)(n.code,{children:"flutter run --flavor horizon -d Quest"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,o.jsx)(n.h3,{id:"products-not-loading",children:"Products Not Loading"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Problem"}),": ",(0,o.jsx)(n.code,{children:"fetchProducts()"})," returns empty list on Quest"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Verify Horizon App ID is correctly configured"}),"\n",(0,o.jsx)(n.li,{children:"Ensure products are active in Meta Quest Developer Dashboard"}),"\n",(0,o.jsx)(n.li,{children:"Check that SKUs match exactly"}),"\n",(0,o.jsx)(n.li,{children:"Confirm you're testing with the correct build flavor"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"build-errors",children:"Build Errors"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Problem"}),": Build fails with flavor errors"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Clean and rebuild\nflutter clean\ncd android && ./gradlew clean\ncd ..\nflutter build apk --flavor horizon\n"})}),"\n",(0,o.jsx)(n.h3,{id:"wrong-billing-system",children:"Wrong Billing System"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Problem"}),": App uses Google Play instead of Horizon"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Verify ",(0,o.jsx)(n.code,{children:"horizonEnabled=true"})," in ",(0,o.jsx)(n.code,{children:"android/gradle.properties"})]}),"\n",(0,o.jsxs)(n.li,{children:["Confirm building with ",(0,o.jsx)(n.code,{children:"--flavor horizon"})]}),"\n",(0,o.jsxs)(n.li,{children:["Check flavor configuration in ",(0,o.jsx)(n.code,{children:"build.gradle"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"./quickstart",children:"Quick Start Guide"})," - Basic implementation"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"./android-setup",children:"Android Setup"})," - General Android configuration"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"../guides/purchases",children:"Purchases Guide"})," - Purchase implementation"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://openiap.dev/docs/horizon-setup",children:"OpenIAP Horizon Docs"})," - Complete setup guide"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var r=i(6540);const o={},t=r.createContext(o);function s(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);