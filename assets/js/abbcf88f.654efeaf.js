"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[7571],{8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var i=n(6540);const a={},r=i.createContext(a);function t(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(r.Provider,{value:s},e.children)}},9709:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"migration/from-v6","title":"Migrating from v6 to v7","description":"Version 7.0.0 introduces breaking API changes to align with OpenIAP standards and improve developer experience with named parameters.","source":"@site/versioned_docs/version-7.0/migration/from-v6.md","sourceDirName":"migration","slug":"/migration/from-v6","permalink":"/flutter_inapp_purchase/docs/7.0/migration/from-v6","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/versioned_docs/version-7.0/migration/from-v6.md","tags":[],"version":"7.0","sidebarPosition":1,"frontMatter":{"sidebar_position":1}}');var a=n(4848),r=n(8453);const t={sidebar_position:1},c="Migrating from v6 to v7",l={},d=[{value:"Overview of Changes",id:"overview-of-changes",level:2},{value:"1. Named Parameters API",id:"1-named-parameters-api",level:3},{value:"2. Simplified finishTransaction",id:"2-simplified-finishtransaction",level:3},{value:"3. Simplified RequestPurchaseProps",id:"3-simplified-requestpurchaseprops",level:3},{value:"4. New AlternativeBillingModeAndroid",id:"4-new-alternativebillingmodeandroid",level:3},{value:"Migration Steps",id:"migration-steps",level:2},{value:"fetchProducts",id:"fetchproducts",level:3},{value:"getAvailablePurchases",id:"getavailablepurchases",level:3},{value:"finishTransaction",id:"finishtransaction",level:3},{value:"validateReceipt (iOS)",id:"validatereceipt-ios",level:3},{value:"initConnection",id:"initconnection",level:3},{value:"deepLinkToSubscriptions",id:"deeplinktosubscriptions",level:3},{value:"Removed iOS-Specific Methods",id:"removed-ios-specific-methods",level:3},{value:"getAvailableItemsIOS()",id:"getavailableitemsios",level:4},{value:"getAppTransactionTypedIOS()",id:"getapptransactiontypedios",level:4},{value:"getPurchaseHistoriesIOS()",id:"getpurchasehistoriesios",level:4},{value:"RequestPurchaseProps",id:"requestpurchaseprops",level:3},{value:"Benefits of v7.0",id:"benefits-of-v70",level:2},{value:"Cleaner API",id:"cleaner-api",level:3},{value:"Reduced Boilerplate",id:"reduced-boilerplate",level:3},{value:"Type Safety",id:"type-safety",level:3},{value:"Better OpenIAP Alignment",id:"better-openiap-alignment",level:3},{value:"Breaking Changes Checklist",id:"breaking-changes-checklist",level:2},{value:"Need Help?",id:"need-help",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"migrating-from-v6-to-v7",children:"Migrating from v6 to v7"})}),"\n",(0,a.jsx)(s.p,{children:"Version 7.0.0 introduces breaking API changes to align with OpenIAP standards and improve developer experience with named parameters."}),"\n",(0,a.jsx)(s.h2,{id:"overview-of-changes",children:"Overview of Changes"}),"\n",(0,a.jsx)(s.h3,{id:"1-named-parameters-api",children:"1. Named Parameters API"}),"\n",(0,a.jsx)(s.p,{children:"All main methods now use named parameters instead of object-based parameters for a cleaner, more intuitive API."}),"\n",(0,a.jsx)(s.h3,{id:"2-simplified-finishtransaction",children:"2. Simplified finishTransaction"}),"\n",(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"finishTransaction"})," method now accepts the ",(0,a.jsx)(s.code,{children:"Purchase"})," object directly instead of individual fields."]}),"\n",(0,a.jsx)(s.h3,{id:"3-simplified-requestpurchaseprops",children:"3. Simplified RequestPurchaseProps"}),"\n",(0,a.jsx)(s.p,{children:"Removed sealed class structure in favor of a simpler direct structure."}),"\n",(0,a.jsx)(s.h3,{id:"4-new-alternativebillingmodeandroid",children:"4. New AlternativeBillingModeAndroid"}),"\n",(0,a.jsx)(s.p,{children:"Added support for alternative billing modes on Android."}),"\n",(0,a.jsx)(s.h2,{id:"migration-steps",children:"Migration Steps"}),"\n",(0,a.jsx)(s.h3,{id:"fetchproducts",children:"fetchProducts"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final result = await FlutterInappPurchase.instance.fetchProducts(\n  ProductRequest(\n    skus: ['product_id'],\n    type: ProductQueryType.InApp,\n  ),\n);\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final result = await FlutterInappPurchase.instance.fetchProducts(\n  skus: ['product_id'],\n  type: ProductQueryType.InApp,\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"getavailablepurchases",children:"getAvailablePurchases"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Using PurchaseOptions object\nfinal purchases = await FlutterInappPurchase.instance.getAvailablePurchases(\n  PurchaseOptions(\n    onlyIncludeActiveItemsIOS: true,\n    alsoPublishToEventListenerIOS: false,\n  ),\n);\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Using named parameters directly\nfinal purchases = await FlutterInappPurchase.instance.getAvailablePurchases(\n  onlyIncludeActiveItemsIOS: true,\n  alsoPublishToEventListenerIOS: false,\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"finishtransaction",children:"finishTransaction"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.finishTransaction(\n  id: purchase.id,\n  isAutoRenewing: purchase.isAutoRenewing,\n  platform: purchase.platform,\n  productId: purchase.productId,\n  purchaseState: purchase.purchaseState,\n  purchaseToken: purchase.purchaseToken,\n  quantity: purchase.quantity,\n  transactionDate: purchase.transactionDate,\n  isConsumable: true,\n);\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.finishTransaction(\n  purchase: purchase,\n  isConsumable: true,\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"validatereceipt-ios",children:"validateReceipt (iOS)"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final result = await FlutterInappPurchase.instance.validateReceiptIOS(\n  ReceiptValidationProps(sku: 'product_id'),\n);\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final result = await FlutterInappPurchase.instance.validateReceiptIOS(\n  sku: 'product_id',\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"initconnection",children:"initConnection"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.initConnection();\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.initConnection(\n  alternativeBillingModeAndroid: AlternativeBillingModeAndroid.None, // Optional\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"deeplinktosubscriptions",children:"deepLinkToSubscriptions"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.deepLinkToSubscriptions(\n  DeepLinkOptions(sku: 'subscription_id'),\n);\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.deepLinkToSubscriptions(\n  skuAndroid: 'subscription_id',\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"removed-ios-specific-methods",children:"Removed iOS-Specific Methods"}),"\n",(0,a.jsx)(s.p,{children:"The following iOS-specific methods have been removed in v7.0. Use the standard OpenIAP-compliant methods instead:"}),"\n",(0,a.jsx)(s.h4,{id:"getavailableitemsios",children:"getAvailableItemsIOS()"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final purchases = await FlutterInappPurchase.instance.getAvailableItemsIOS();\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Use the standard getAvailablePurchases() method\nfinal purchases = await FlutterInappPurchase.instance.getAvailablePurchases();\n"})}),"\n",(0,a.jsx)(s.h4,{id:"getapptransactiontypedios",children:"getAppTransactionTypedIOS()"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final appTransaction = await FlutterInappPurchase.instance.getAppTransactionTypedIOS();\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Use getAppTransactionIOS() directly\nfinal appTransaction = await FlutterInappPurchase.instance.getAppTransactionIOS();\n"})}),"\n",(0,a.jsx)(s.h4,{id:"getpurchasehistoriesios",children:"getPurchaseHistoriesIOS()"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"final histories = await FlutterInappPurchase.instance.getPurchaseHistoriesIOS();\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Use getAvailablePurchases() with options to include expired items\nfinal histories = await FlutterInappPurchase.instance.getAvailablePurchases(\n  onlyIncludeActiveItemsIOS: false,\n  alsoPublishToEventListenerIOS: true,\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"requestpurchaseprops",children:"RequestPurchaseProps"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Before (v6.x)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Using factory methods\nfinal props = RequestPurchaseProps.inApp(\n  request: RequestPurchasePropsByPlatforms(\n    ios: RequestPurchaseIosProps(sku: 'product_id'),\n    android: RequestPurchaseAndroidProps(skus: ['product_id']),\n  ),\n);\n\nfinal subsProps = RequestPurchaseProps.subs(\n  request: RequestSubscriptionPropsByPlatforms(\n    ios: RequestSubscriptionIosProps(sku: 'sub_id'),\n    android: RequestSubscriptionAndroidProps(skus: ['sub_id']),\n  ),\n);\n"})}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"After (v7.0)"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Direct constructor with type parameter\nfinal props = RequestPurchaseProps(\n  request: RequestPurchasePropsByPlatforms(\n    ios: RequestPurchaseIosProps(sku: 'product_id'),\n    android: RequestPurchaseAndroidProps(skus: ['product_id']),\n  ),\n  type: ProductQueryType.InApp,\n);\n\nfinal subsProps = RequestPurchaseProps(\n  request: RequestPurchasePropsByPlatforms(\n    ios: RequestPurchaseIosProps(sku: 'sub_id'),\n    android: RequestPurchaseAndroidProps(skus: ['sub_id']),\n  ),\n  type: ProductQueryType.Subs,\n);\n"})}),"\n",(0,a.jsx)(s.h2,{id:"benefits-of-v70",children:"Benefits of v7.0"}),"\n",(0,a.jsx)(s.h3,{id:"cleaner-api",children:"Cleaner API"}),"\n",(0,a.jsx)(s.p,{children:"Named parameters make the API more intuitive and self-documenting:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Clear and concise\nawait iap.fetchProducts(\n  skus: ['product1', 'product2'],\n  type: ProductQueryType.InApp,\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"reduced-boilerplate",children:"Reduced Boilerplate"}),"\n",(0,a.jsx)(s.p,{children:"Finishing transactions is now much simpler:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-dart",children:"// Just pass the purchase object\nawait iap.finishTransaction(\n  purchase: purchase,\n  isConsumable: true,\n);\n"})}),"\n",(0,a.jsx)(s.h3,{id:"type-safety",children:"Type Safety"}),"\n",(0,a.jsx)(s.p,{children:"Direct constructor usage provides better type safety and IDE autocomplete support."}),"\n",(0,a.jsx)(s.h3,{id:"better-openiap-alignment",children:"Better OpenIAP Alignment"}),"\n",(0,a.jsx)(s.p,{children:"The new API structure aligns better with the OpenIAP specification."}),"\n",(0,a.jsx)(s.h2,{id:"breaking-changes-checklist",children:"Breaking Changes Checklist"}),"\n",(0,a.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Update all ",(0,a.jsx)(s.code,{children:"fetchProducts"})," calls to use named parameters"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Update all ",(0,a.jsx)(s.code,{children:"getAvailablePurchases"})," calls to use named parameters"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Update all ",(0,a.jsx)(s.code,{children:"finishTransaction"})," calls to pass ",(0,a.jsx)(s.code,{children:"Purchase"})," object"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Update all ",(0,a.jsx)(s.code,{children:"validateReceiptIOS"})," calls to use named parameters"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Update all ",(0,a.jsx)(s.code,{children:"deepLinkToSubscriptions"})," calls to use named parameters"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Replace ",(0,a.jsx)(s.code,{children:"RequestPurchaseProps.inApp()"})," with direct constructor + ",(0,a.jsx)(s.code,{children:"type"})," parameter"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Replace ",(0,a.jsx)(s.code,{children:"RequestPurchaseProps.subs()"})," with direct constructor + ",(0,a.jsx)(s.code,{children:"type"})," parameter"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Remove ",(0,a.jsx)(s.code,{children:"RequestSubscriptionPropsByPlatforms"})," usage (use ",(0,a.jsx)(s.code,{children:"RequestPurchasePropsByPlatforms"})," instead)"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Replace ",(0,a.jsx)(s.code,{children:"getAvailableItemsIOS()"})," with ",(0,a.jsx)(s.code,{children:"getAvailablePurchases()"})]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Replace ",(0,a.jsx)(s.code,{children:"getAppTransactionTypedIOS()"})," with ",(0,a.jsx)(s.code,{children:"getAppTransactionIOS()"})]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Replace ",(0,a.jsx)(s.code,{children:"getPurchaseHistoriesIOS()"})," with ",(0,a.jsx)(s.code,{children:"getAvailablePurchases()"})," with options"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Test all purchase flows thoroughly"]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"need-help",children:"Need Help?"}),"\n",(0,a.jsx)(s.p,{children:"If you encounter issues during migration:"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["Check the ",(0,a.jsx)(s.a,{href:"/docs/api/overview",children:"API Reference"})," for detailed method signatures"]}),"\n",(0,a.jsxs)(s.li,{children:["Review the ",(0,a.jsx)(s.a,{href:"/docs/examples/complete-implementation",children:"Examples"})," for updated code patterns"]}),"\n",(0,a.jsxs)(s.li,{children:["Open an issue on ",(0,a.jsx)(s.a,{href:"https://github.com/dooboolab-community/flutter_inapp_purchase/issues",children:"GitHub"})]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}}}]);