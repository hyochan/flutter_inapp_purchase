"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[5712],{7499:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api/methods/request-subscription","title":"requestSubscription","description":"\u26a0\ufe0f Deprecated: requestSubscription() remains for backwards compatibility with the v5 API. New code should call requestPurchase() with either PurchaseType.subs (legacy API) or the unified RequestPurchaseProps flow.","source":"@site/docs/api/methods/request-subscription.md","sourceDirName":"api/methods","slug":"/api/methods/request-subscription","permalink":"/flutter_inapp_purchase/docs/api/methods/request-subscription","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/api/methods/request-subscription.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"requestSubscription"}}');var i=n(4848),t=n(8453);const d={sidebar_position:5,title:"requestSubscription"},c="requestSubscription() (Deprecated)",o={},a=[{value:"Overview",id:"overview",level:2},{value:"Signature",id:"signature",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Migration Guide",id:"migration-guide",level:2},{value:"Old code (legacy):",id:"old-code-legacy",level:3},{value:"Recommended replacement:",id:"recommended-replacement",level:3},{value:"Notes",id:"notes",level:2}];function l(e){const r={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsxs)(r.h1,{id:"requestsubscription-deprecated",children:["requestSubscription() ",(0,i.jsx)(r.em,{children:"(Deprecated)"})]})}),"\n",(0,i.jsxs)(r.blockquote,{children:["\n",(0,i.jsxs)(r.p,{children:["\u26a0\ufe0f ",(0,i.jsx)(r.strong,{children:"Deprecated:"})," ",(0,i.jsx)(r.code,{children:"requestSubscription()"})," remains for backwards compatibility with the v5 API. New code should call ",(0,i.jsx)(r.a,{href:"/flutter_inapp_purchase/docs/api/methods/request-purchase",children:(0,i.jsx)(r.code,{children:"requestPurchase()"})})," with either ",(0,i.jsx)(r.code,{children:"PurchaseType.subs"})," (legacy API) or the unified ",(0,i.jsx)(r.a,{href:"/flutter_inapp_purchase/docs/api/classes/flutter-inapp-purchase#requestpurchase",children:(0,i.jsx)(r.code,{children:"RequestPurchaseProps"})})," flow."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"requestSubscription()"})," starts the platform subscription purchase flow using the legacy method signature that predates the OpenIAP migration. The method still works but is implemented as a thin wrapper around ",(0,i.jsx)(r.code,{children:"requestPurchase()"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Use this API only while migrating older code. All new implementations should move to ",(0,i.jsx)(r.code,{children:"requestPurchase()"})," so you can take advantage of the typed request builder and platform-specific props."]}),"\n",(0,i.jsx)(r.h2,{id:"signature",children:"Signature"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"Future<dynamic> requestSubscription(\n  String productId, {\n  int? prorationModeAndroid,\n  String? obfuscatedAccountIdAndroid,\n  String? obfuscatedProfileIdAndroid,\n  String? purchaseTokenAndroid,\n  int? offerTokenIndex,\n})\n"})}),"\n",(0,i.jsx)(r.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"productId"})," \u2013 Subscription identifier to purchase"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"prorationModeAndroid"})," ",(0,i.jsx)(r.em,{children:"(Android only)"})," \u2013 BillingClient proration mode for upgrades/downgrades"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"obfuscatedAccountIdAndroid"})," ",(0,i.jsx)(r.em,{children:"(Android only)"})," \u2013 Stable per-account identifier for Play Billing"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"obfuscatedProfileIdAndroid"})," ",(0,i.jsx)(r.em,{children:"(Android only)"})," \u2013 Stable per-profile identifier for Play Billing"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"purchaseTokenAndroid"})," ",(0,i.jsx)(r.em,{children:"(Android only, deprecated)"})," \u2013 Legacy upgrade token (use the new ",(0,i.jsx)(r.code,{children:"purchaseToken"})," field via ",(0,i.jsx)(r.code,{children:"requestPurchase()"})," instead)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"offerTokenIndex"})," ",(0,i.jsx)(r.em,{children:"(Android only)"})," \u2013 Index of the subscription offer to purchase"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,i.jsx)(r.h3,{id:"old-code-legacy",children:"Old code (legacy):"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.requestSubscription('com.example.monthly');\n"})}),"\n",(0,i.jsx)(r.h3,{id:"recommended-replacement",children:"Recommended replacement:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.requestPurchase(\n  request: RequestPurchase(\n    ios: RequestPurchaseIOS(sku: 'com.example.monthly'),\n    android: RequestPurchaseAndroid(skus: ['com.example.monthly']),\n  ),\n  type: PurchaseType.subs,\n);\n"})}),"\n",(0,i.jsx)(r.p,{children:"Or, when using the new OpenIAP helpers:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"await FlutterInappPurchase.instance.requestPurchaseWithBuilder(\n  build: (builder) {\n    builder\n      ..type = ProductQueryType.Subs\n      ..ios.sku = 'com.example.monthly'\n      ..android.skus = ['com.example.monthly'];\n  },\n);\n"})}),"\n",(0,i.jsx)(r.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["The method simply forwards to ",(0,i.jsx)(r.a,{href:"/flutter_inapp_purchase/docs/api/methods/request-purchase",children:(0,i.jsx)(r.code,{children:"requestPurchase()"})}),"; no new features will be added here."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"purchaseTokenAndroid"})," is maintained for binary compatibility but should be replaced with the new ",(0,i.jsx)(r.code,{children:"purchaseToken"})," property when using ",(0,i.jsx)(r.code,{children:"RequestPurchaseProps"}),"."]}),"\n",(0,i.jsx)(r.li,{children:"This method will be removed in a future major release (7.0). Plan your migration accordingly."}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>c});var s=n(6540);const i={},t=s.createContext(i);function d(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);