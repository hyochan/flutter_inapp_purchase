"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[2628],{4963:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"api/types/error-codes","title":"Error Codes","description":"Comprehensive error handling types and codes for flutterinapppurchase.","source":"@site/versioned_docs/version-7.0/api/types/error-codes.md","sourceDirName":"api/types","slug":"/api/types/error-codes","permalink":"/flutter_inapp_purchase/docs/7.0/api/types/error-codes","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/versioned_docs/version-7.0/api/types/error-codes.md","tags":[],"version":"7.0","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Error Codes"}}');var i=n(4848),o=n(8453);const l={sidebar_position:3,title:"Error Codes"},d="Error Codes",c={},t=[{value:"ErrorCode Enum",id:"errorcode-enum",level:2},{value:"Common Error Codes",id:"common-error-codes",level:2},{value:"User-Related Errors",id:"user-related-errors",level:3},{value:"Product/Item Errors",id:"productitem-errors",level:3},{value:"Service/Network Errors",id:"servicenetwork-errors",level:3},{value:"Connection Errors",id:"connection-errors",level:3},{value:"Transaction Errors",id:"transaction-errors",level:3},{value:"Developer Errors",id:"developer-errors",level:3},{value:"Platform-Specific Errors",id:"platform-specific-errors",level:3},{value:"Other Errors",id:"other-errors",level:3},{value:"Error Handling Examples",id:"error-handling-examples",level:2},{value:"Basic Error Handling",id:"basic-error-handling",level:3},{value:"Error Handling with Retry",id:"error-handling-with-retry",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related",id:"related",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"error-codes",children:"Error Codes"})}),"\n",(0,i.jsx)(r.p,{children:"Comprehensive error handling types and codes for flutter_inapp_purchase."}),"\n",(0,i.jsx)(r.h2,{id:"errorcode-enum",children:"ErrorCode Enum"}),"\n",(0,i.jsx)(r.p,{children:"Enumeration of all possible error codes that can occur during IAP operations."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"enum ErrorCode {\n  Unknown,\n  UserCancelled,\n  UserError,\n  ItemUnavailable,\n  RemoteError,\n  NetworkError,\n  ServiceError,\n  ReceiptFailed,\n  ReceiptFinished,\n  ReceiptFinishedFailed,\n  NotPrepared,\n  NotEnded,\n  AlreadyOwned,\n  DeveloperError,\n  BillingResponseJsonParseError,\n  DeferredPayment,\n  Interrupted,\n  IapNotAvailable,\n  PurchaseError,\n  SyncError,\n  TransactionValidationFailed,\n  ActivityUnavailable,\n  AlreadyPrepared,\n  Pending,\n  ConnectionClosed,\n  InitConnection,\n  ServiceDisconnected,\n  QueryProduct,\n  SkuNotFound,\n  SkuOfferMismatch,\n  ItemNotOwned,\n  BillingUnavailable,\n  FeatureNotSupported,\n  EmptySkuList,\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"common-error-codes",children:"Common Error Codes"}),"\n",(0,i.jsx)(r.h3,{id:"user-related-errors",children:"User-Related Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"UserCancelled"})})," - User cancelled the purchase dialog"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"UserError"})})," - General user-related error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"DeferredPayment"})})," - Payment deferred (e.g., Ask to Buy on iOS)"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"productitem-errors",children:"Product/Item Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ItemUnavailable"})})," - Product not available in store"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"AlreadyOwned"})})," - User already owns this product"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ItemNotOwned"})})," - User doesn't own the product (for consume/acknowledge)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"SkuNotFound"})})," - Product ID not found"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"EmptySkuList"})})," - No product IDs provided"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"SkuOfferMismatch"})})," - Offer doesn't match the product"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"servicenetwork-errors",children:"Service/Network Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ServiceError"})})," - Store service unavailable"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"NetworkError"})})," - Network connectivity issues"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"BillingUnavailable"})})," - Billing service not available"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"RemoteError"})})," - Remote server error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ServiceDisconnected"})})," - Service connection lost"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"connection-errors",children:"Connection Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"NotPrepared"})})," - Connection not initialized"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"AlreadyPrepared"})})," - Connection already initialized"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"NotEnded"})})," - Connection not properly ended"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ConnectionClosed"})})," - Connection was closed"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"InitConnection"})})," - Error during initialization"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"transaction-errors",children:"Transaction Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"PurchaseError"})})," - General purchase error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ReceiptFailed"})})," - Receipt validation failed"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ReceiptFinished"})})," - Receipt already finished"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ReceiptFinishedFailed"})})," - Failed to finish receipt"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"TransactionValidationFailed"})})," - Transaction validation failed"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"developer-errors",children:"Developer Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"DeveloperError"})})," - Configuration or implementation issue"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"BillingResponseJsonParseError"})})," - Failed to parse billing response"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"QueryProduct"})})," - Error querying products"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"ActivityUnavailable"})})," - Android Activity unavailable"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"platform-specific-errors",children:"Platform-Specific Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"FeatureNotSupported"})})," - Feature not supported on platform"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"IapNotAvailable"})})," - IAP not available on device"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"other-errors",children:"Other Errors"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"Unknown"})})," - Unknown or unspecified error"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"Pending"})})," - Purchase is pending"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"Interrupted"})})," - Purchase flow interrupted"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:(0,i.jsx)(r.code,{children:"SyncError"})})," - Synchronization error"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"error-handling-examples",children:"Error Handling Examples"}),"\n",(0,i.jsx)(r.h3,{id:"basic-error-handling",children:"Basic Error Handling"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"void _handleError(PurchaseError error) {\n  switch (error.code) {\n    case ErrorCode.UserCancelled:\n      // Don't show error - user intentionally cancelled\n      debugPrint('User cancelled purchase');\n      break;\n\n    case ErrorCode.NetworkError:\n      _showMessage('Network error. Please check your connection.');\n      break;\n\n    case ErrorCode.AlreadyOwned:\n      _showMessage('You already own this item.');\n      // Suggest restore purchases\n      break;\n\n    case ErrorCode.ItemUnavailable:\n      _showMessage('This item is currently unavailable.');\n      break;\n\n    case ErrorCode.ServiceError:\n    case ErrorCode.BillingUnavailable:\n      _showMessage('Store service unavailable. Please try again later.');\n      break;\n\n    default:\n      _showMessage('Purchase failed: ${error.message}');\n      debugPrint('Error code: ${error.code}');\n  }\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"error-handling-with-retry",children:"Error Handling with Retry"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-dart",children:"Future<void> handleErrorWithRetry(PurchaseError error) async {\n  switch (error.code) {\n    case ErrorCode.NetworkError:\n    case ErrorCode.ServiceError:\n      // Retry with exponential backoff\n      await _retryWithBackoff();\n      break;\n\n    case ErrorCode.NotPrepared:\n      // Reinitialize connection\n      await iap.initConnection();\n      break;\n\n    case ErrorCode.UserCancelled:\n      // Don't retry\n      break;\n\n    default:\n      _showError(error.message);\n  }\n}\n"})}),"\n",(0,i.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Always Handle Errors"})," - Never ignore IAP errors, always listen to ",(0,i.jsx)(r.code,{children:"purchaseErrorListener"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"User-Friendly Messages"})," - Show appropriate messages based on error code"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Log for Analytics"})," - Track error patterns to identify common issues"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Implement Retry Logic"})," - Retry for network/service errors with exponential backoff"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Don't Retry User Cancellations"})," - Respect when users cancel purchases"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Handle Platform Differences"})," - Some errors are platform-specific"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"related",children:"Related"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"../../guides/lifecycle",children:"Purchase Lifecycle"})," - Full purchase flow"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"../../guides/error-handling",children:"Error Handling Guide"})," - Comprehensive error handling"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"../../guides/troubleshooting",children:"Troubleshooting"})," - Common error solutions"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>d});var s=n(6540);const i={},o=s.createContext(i);function l(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);