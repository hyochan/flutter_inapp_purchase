"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[9598],{2012:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api/classes/product","title":"Product","description":"Represents a product available for purchase from either the Google Play Store or iOS App Store.","source":"@site/docs/api/classes/product.md","sourceDirName":"api/classes","slug":"/api/classes/product","permalink":"/flutter_inapp_purchase/docs/api/classes/product","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/api/classes/product.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Product"}}');var t=r(4848),s=r(8453);const c={sidebar_position:2,title:"Product"},o="Product Class",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Type Variants",id:"type-variants",level:2},{value:"Common Properties",id:"common-properties",level:2},{value:"iOS-Specific Properties (ProductIOS)",id:"ios-specific-properties-productios",level:2},{value:"Android-Specific Properties (ProductAndroid)",id:"android-specific-properties-productandroid",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Fetching Products",id:"fetching-products",level:3},{value:"Platform-Specific Information",id:"platform-specific-information",level:3},{value:"Displaying Product List",id:"displaying-product-list",level:3},{value:"Subscription Products",id:"subscription-products",level:2},{value:"Type Checking",id:"type-checking",level:2},{value:"Related Types",id:"related-types",level:2},{value:"ProductType",id:"producttype",level:3},{value:"ProductTypeIOS",id:"producttypeios",level:3},{value:"IapPlatform",id:"iapplatform",level:3},{value:"Migration from IapItem (v5 \u2192 v6+)",id:"migration-from-iapitem-v5--v6",level:2},{value:"Platform Differences",id:"platform-differences",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Important Notes",id:"important-notes",level:2},{value:"See Also",id:"see-also",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"product-class",children:"Product Class"})}),"\n",(0,t.jsx)(n.p,{children:"Represents a product available for purchase from either the Google Play Store or iOS App Store."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Product"})," class is a union type that contains all the information about an in-app product that can be purchased. Starting from v6.0, this class follows the OpenIAP specification and replaces the legacy ",(0,t.jsx)(n.code,{children:"IapItem"})," class."]}),"\n",(0,t.jsx)(n.h2,{id:"type-variants",children:"Type Variants"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Product"})," type is a union of platform-specific implementations:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ProductIOS"})," - iOS in-app products (non-subscription)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ProductAndroid"})," - Android in-app products (non-subscription)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For subscriptions, use the ",(0,t.jsx)(n.code,{children:"ProductSubscription"})," union type:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ProductSubscriptionIOS"})," - iOS subscription products"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ProductSubscriptionAndroid"})," - Android subscription products"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-properties",children:"Common Properties"}),"\n",(0,t.jsx)(n.p,{children:"All product types share these properties:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String id\n"})}),"\n",(0,t.jsx)(n.p,{children:"The unique identifier for the product (SKU)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String title\n"})}),"\n",(0,t.jsx)(n.p,{children:"The localized title/name of the product."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String description\n"})}),"\n",(0,t.jsx)(n.p,{children:"The localized description of the product."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String displayPrice\n"})}),"\n",(0,t.jsx)(n.p,{children:"The formatted price string with currency symbol, localized for the user's region."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String currency\n"})}),"\n",(0,t.jsx)(n.p,{children:'The currency code for the price (e.g., "USD", "EUR").'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final double? price\n"})}),"\n",(0,t.jsx)(n.p,{children:"The price of the product as a numeric value (optional)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final ProductType type\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The type of product (",(0,t.jsx)(n.code,{children:"ProductType.InApp"})," or ",(0,t.jsx)(n.code,{children:"ProductType.Subs"}),")."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final IapPlatform platform\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The platform this product is from (",(0,t.jsx)(n.code,{children:"IapPlatform.IOS"})," or ",(0,t.jsx)(n.code,{children:"IapPlatform.Android"}),")."]}),"\n",(0,t.jsx)(n.h2,{id:"ios-specific-properties-productios",children:"iOS-Specific Properties (ProductIOS)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String displayNameIOS\n"})}),"\n",(0,t.jsx)(n.p,{children:"The display name for the product on iOS."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final bool isFamilyShareableIOS\n"})}),"\n",(0,t.jsx)(n.p,{children:"Whether the product is shareable with family members."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String jsonRepresentationIOS\n"})}),"\n",(0,t.jsx)(n.p,{children:"The JSON representation from StoreKit 2."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final ProductTypeIOS typeIOS\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The StoreKit 2 product type (e.g., ",(0,t.jsx)(n.code,{children:"ProductTypeIOS.Consumable"}),", ",(0,t.jsx)(n.code,{children:"ProductTypeIOS.NonConsumable"}),")."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final SubscriptionInfoIOS? subscriptionInfoIOS\n"})}),"\n",(0,t.jsx)(n.p,{children:"Subscription information if this is a subscription product (optional)."}),"\n",(0,t.jsx)(n.h2,{id:"android-specific-properties-productandroid",children:"Android-Specific Properties (ProductAndroid)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final String nameAndroid\n"})}),"\n",(0,t.jsx)(n.p,{children:"The product name on Android."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final ProductAndroidOneTimePurchaseOfferDetail? oneTimePurchaseOfferDetailsAndroid\n"})}),"\n",(0,t.jsx)(n.p,{children:"One-time purchase offer details for in-app products."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final List<ProductSubscriptionAndroidOfferDetails>? subscriptionOfferDetailsAndroid\n"})}),"\n",(0,t.jsx)(n.p,{children:"Subscription offer details for subscription products (optional)."}),"\n",(0,t.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,t.jsx)(n.h3,{id:"fetching-products",children:"Fetching Products"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final result = await FlutterInappPurchase.instance.fetchProducts(\n  ProductRequest(\n    skus: ['premium_feature', 'remove_ads'],\n    type: ProductQueryType.InApp,\n  ),\n);\n\nif (result is FetchProductsResultProducts) {\n  for (final product in result.value ?? const []) {\n    print('Product ID: ${product.id}');\n    print('Title: ${product.title}');\n    print('Price: ${product.displayPrice}');\n    print('Description: ${product.description}');\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"platform-specific-information",children:"Platform-Specific Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"void displayProductInfo(Product product) {\n  // Common information\n  print('Product: ${product.title}');\n  print('Price: ${product.displayPrice}');\n\n  // Check platform-specific details\n  if (product is ProductIOS) {\n    print('iOS Product');\n    print('Family Shareable: ${product.isFamilyShareableIOS}');\n    print('Product Type: ${product.typeIOS}');\n\n    if (product.subscriptionInfoIOS != null) {\n      print('Subscription Period: ${product.subscriptionInfoIOS!.subscriptionPeriod}');\n    }\n  } else if (product is ProductAndroid) {\n    print('Android Product');\n    print('Name: ${product.nameAndroid}');\n\n    if (product.subscriptionOfferDetailsAndroid != null) {\n      for (var offer in product.subscriptionOfferDetailsAndroid!) {\n        print('Offer: ${offer.basePlanId}');\n        print('Token: ${offer.offerToken}');\n      }\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"displaying-product-list",children:"Displaying Product List"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"class ProductListWidget extends StatelessWidget {\n  final List<Product> products;\n\n  const ProductListWidget({required this.products});\n\n  @override\n  Widget build(BuildContext context) {\n    return ListView.builder(\n      itemCount: products.length,\n      itemBuilder: (context, index) {\n        final product = products[index];\n        return ListTile(\n          title: Text(product.title),\n          subtitle: Text(product.description),\n          trailing: Column(\n            mainAxisAlignment: MainAxisAlignment.center,\n            crossAxisAlignment: CrossAxisAlignment.end,\n            children: [\n              Text(\n                product.displayPrice,\n                style: TextStyle(\n                  fontSize: 18,\n                  fontWeight: FontWeight.bold,\n                ),\n              ),\n              Text(\n                product.currency,\n                style: TextStyle(fontSize: 12, color: Colors.grey),\n              ),\n            ],\n          ),\n          onTap: () => _purchaseProduct(product),\n        );\n      },\n    );\n  }\n\n  Future<void> _purchaseProduct(Product product) async {\n    // Implement purchase logic\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"subscription-products",children:"Subscription Products"}),"\n",(0,t.jsxs)(n.p,{children:["For subscription products, use ",(0,t.jsx)(n.code,{children:"ProductSubscription"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"final result = await FlutterInappPurchase.instance.fetchProducts(\n  ProductRequest(\n    skus: ['monthly_sub', 'yearly_sub'],\n    type: ProductQueryType.Subs,\n  ),\n);\n\nif (result is FetchProductsResultSubscriptions) {\n  for (final subscription in result.value ?? const []) {\n    if (subscription is ProductSubscriptionIOS) {\n      print('iOS Subscription: ${subscription.title}');\n      print('Period: ${subscription.subscriptionPeriodUnitIOS}');\n      print('Period Number: ${subscription.subscriptionPeriodNumberIOS}');\n\n      if (subscription.introductoryPriceIOS != null) {\n        print('Intro Price: ${subscription.introductoryPriceIOS}');\n        print('Intro Period: ${subscription.introductoryPriceSubscriptionPeriodIOS}');\n      }\n    } else if (subscription is ProductSubscriptionAndroid) {\n      print('Android Subscription: ${subscription.title}');\n\n      for (var offer in subscription.subscriptionOfferDetailsAndroid) {\n        print('Base Plan: ${offer.basePlanId}');\n\n        for (var phase in offer.pricingPhases.pricingPhaseList) {\n          print('Phase Price: ${phase.formattedPrice}');\n          print('Billing Period: ${phase.billingPeriod}');\n          print('Billing Cycle Count: ${phase.billingCycleCount}');\n        }\n      }\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"type-checking",children:"Type Checking"}),"\n",(0,t.jsx)(n.p,{children:"Use type checking to determine the platform-specific variant:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"void handleProduct(Product product) {\n  if (product is ProductIOS) {\n    // Handle iOS product\n    handleIOSProduct(product);\n  } else if (product is ProductAndroid) {\n    // Handle Android product\n    handleAndroidProduct(product);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"related-types",children:"Related Types"}),"\n",(0,t.jsx)(n.h3,{id:"producttype",children:"ProductType"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"enum ProductType {\n  InApp,  // One-time purchase\n  Subs,   // Subscription\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"producttypeios",children:"ProductTypeIOS"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"enum ProductTypeIOS {\n  Consumable,\n  NonConsumable,\n  NonRenewingSubscription,\n  AutoRenewableSubscription,\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"iapplatform",children:"IapPlatform"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"enum IapPlatform {\n  IOS,\n  Android,\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"migration-from-iapitem-v5--v6",children:"Migration from IapItem (v5 \u2192 v6+)"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"IapItem"})," class was removed in v6.0. Use ",(0,t.jsx)(n.code,{children:"Product"})," instead:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"// Before (v5.x)\nIapItem item = ...;\nString productId = item.productId;\nString price = item.localizedPrice;\n\n// After (v6.0+)\nProduct product = ...;\nString productId = product.id;\nString price = product.displayPrice;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"platform-differences",children:"Platform Differences"}),"\n",(0,t.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Uses StoreKit 2 API"}),"\n",(0,t.jsxs)(n.li,{children:["Provides ",(0,t.jsx)(n.code,{children:"jsonRepresentationIOS"})," with raw StoreKit data"]}),"\n",(0,t.jsx)(n.li,{children:"Supports family sharing"}),"\n",(0,t.jsx)(n.li,{children:"Product type includes consumable/non-consumable distinction"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Uses Google Play Billing Library v6+"}),"\n",(0,t.jsx)(n.li,{children:"Supports multiple subscription offers per product"}),"\n",(0,t.jsx)(n.li,{children:"Pricing phases for flexible billing"}),"\n",(0,t.jsx)(n.li,{children:"One-time purchase offer details for in-app products"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type Safety"}),": Use the union type pattern for type-safe access to platform-specific properties"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Null Safety"}),": Optional properties may be null if the platform doesn't provide that information"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Price Format"}),": Use ",(0,t.jsx)(n.code,{children:"displayPrice"})," for displaying to users (pre-formatted with currency)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Subscription Info"}),": Check ",(0,t.jsx)(n.code,{children:"subscriptionInfoIOS"})," or ",(0,t.jsx)(n.code,{children:"subscriptionOfferDetailsAndroid"})," for subscription-specific data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Product Query"}),": Use ",(0,t.jsx)(n.code,{children:"ProductQueryType.InApp"})," for in-app products and ",(0,t.jsx)(n.code,{children:"ProductQueryType.Subs"})," for subscriptions"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/flutter_inapp_purchase/docs/api/classes/purchase-item",children:"Purchase Class"})," - Represents a completed purchase"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/flutter_inapp_purchase/docs/api/methods/get-products",children:"fetchProducts() Method"})," - Fetch available products"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var i=r(6540);const t={},s=i.createContext(t);function c(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);