<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://hyochan.github.io/flutter_inapp_purchase/blog</id>
    <title>Flutter In-App Purchase Blog</title>
    <updated>2025-10-28T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://hyochan.github.io/flutter_inapp_purchase/blog"/>
    <subtitle>Flutter In-App Purchase Blog</subtitle>
    <icon>https://hyochan.github.io/flutter_inapp_purchase/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[7.1.13 - Horizon OS Support for Meta Quest Devices]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support"/>
        <updated>2025-10-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Horizon OS Support]]></summary>
        <content type="html"><![CDATA[<p><img decoding="async" loading="lazy" alt="Horizon OS Support" src="https://hyochan.github.io/flutter_inapp_purchase/assets/images/horizon-780baf2aea9dd1809162ddf4874d554f.png" width="1024" height="1024" class="img_ev3q"></p>
<p>Flutter In-App Purchase now supports Meta Quest devices with Horizon OS billing, enabling seamless in-app purchases in VR applications using Meta's Platform SDK.</p>
<p><a href="https://github.com/hyochan/flutter_inapp_purchase/releases/tag/7.1.13" target="_blank" rel="noopener noreferrer">View the release on GitHub →</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="feature-highlights">Feature Highlights<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#feature-highlights" class="hash-link" aria-label="Direct link to Feature Highlights" title="Direct link to Feature Highlights">​</a></h2>
<p>With Horizon OS support, you can now:</p>
<ul>
<li>Build VR apps for Meta Quest devices (Quest 2, Quest 3, Quest Pro) with in-app purchases</li>
<li>Use the same Flutter In-App Purchase API for both Google Play and Meta Horizon stores</li>
<li>Switch between billing platforms with a simple configuration flag</li>
<li>Distribute apps on both Google Play Store and Meta Horizon Store from a single codebase</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-horizon-os">What is Horizon OS?<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#what-is-horizon-os" class="hash-link" aria-label="Direct link to What is Horizon OS?" title="Direct link to What is Horizon OS?">​</a></h2>
<p>Horizon OS is Meta's operating system for Quest VR devices. With this update, flutter_inapp_purchase now supports Meta's Platform SDK for billing, allowing developers to monetize their VR applications on the Meta Horizon Store.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h2>
<p>The implementation uses OpenIAP's <code>openiap-google-horizon</code> wrapper, which provides a unified interface for both Google Play Billing and Meta's Platform SDK. Your existing code remains unchanged - the platform selection happens at build time through product flavors.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-horizon-mode">Enable Horizon Mode<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#enable-horizon-mode" class="hash-link" aria-label="Direct link to Enable Horizon Mode" title="Direct link to Enable Horizon Mode">​</a></h3>
<p>Add to your <code>android/gradle.properties</code>:</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Enable Horizon OS billing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">horizonEnabled=true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-horizon-app-id">Configure Horizon App ID<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#configure-horizon-app-id" class="hash-link" aria-label="Direct link to Configure Horizon App ID" title="Direct link to Configure Horizon App ID">​</a></h3>
<p>Add your Meta Horizon App ID in <code>android/local.properties</code>:</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HORIZON_APP_ID=your_horizon_app_id_here</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-androidmanifestxml">Update AndroidManifest.xml<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#update-androidmanifestxml" class="hash-link" aria-label="Direct link to Update AndroidManifest.xml" title="Direct link to Update AndroidManifest.xml">​</a></h3>
<p>Add the metadata in your <code>android/app/src/main/AndroidManifest.xml</code>:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">application</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Meta Horizon App ID - injected by Gradle --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta-data</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">com.meta.horizon.platform.ovr.HORIZON_APP_ID</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">android:</span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">${HORIZON_APP_ID}</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">application</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flutter pub add flutter_inapp_purchase</span><br></span></code></pre></div></div>
<p>Or add to your <code>pubspec.yaml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">flutter_inapp_purchase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^7.1.13</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-commands">Build Commands<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#build-commands" class="hash-link" aria-label="Direct link to Build Commands" title="Direct link to Build Commands">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build for Google Play Store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter build apk --flavor play</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build for Meta Horizon Store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter build apk --flavor horizon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run on Quest device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter run --flavor horizon -d Quest</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-usage">Code Usage<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#code-usage" class="hash-link" aria-label="Direct link to Code Usage" title="Direct link to Code Usage">​</a></h3>
<p>No code changes required! The API remains identical across platforms.</p>
<p>The implementation automatically detects the <code>horizonEnabled</code> flag and uses:</p>
<ul>
<li><strong>Google Play Billing</strong> when <code>horizonEnabled=false</code> (default)</li>
<li><strong>Meta Platform SDK</strong> when <code>horizonEnabled=true</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="under-the-hood">Under the Hood<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#under-the-hood" class="hash-link" aria-label="Direct link to Under the Hood" title="Direct link to Under the Hood">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-management">Dependency Management<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#dependency-management" class="hash-link" aria-label="Direct link to Dependency Management" title="Direct link to Dependency Management">​</a></h3>
<p>The plugin uses conditional dependencies in <code>android/build.gradle</code>:</p>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Play flavor - Google Play Billing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add("playImplementation", "io.github.hyochan.openiap:openiap-google:version")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Horizon flavor - Meta Platform SDK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add("horizonImplementation", "io.github.hyochan.openiap:openiap-google-horizon:version")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-system">Build System<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#build-system" class="hash-link" aria-label="Direct link to Build System" title="Direct link to Build System">​</a></h3>
<p>Product flavors are configured in both the plugin and your app:</p>
<p><strong>Plugin</strong> (<code>flutter_inapp_purchase/android/build.gradle</code>):</p>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flavorDimensions "platform"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    productFlavors {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        play { dimension "platform"; isDefault = true }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        horizon { dimension "platform" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Your App</strong> (<code>android/app/build.gradle</code>):</p>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flavorDimensions "platform"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    productFlavors {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        play { /* configuration */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        horizon { /* configuration */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="backward-compatibility">Backward Compatibility<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#backward-compatibility" class="hash-link" aria-label="Direct link to Backward Compatibility" title="Direct link to Backward Compatibility">​</a></h2>
<p>This update is <strong>100% backward compatible</strong>:</p>
<ul>
<li>Existing apps using Google Play Billing continue to work without changes</li>
<li>The default behavior remains Google Play Billing (<code>horizonEnabled=false</code> by default)</li>
<li>Horizon support is opt-in through simple configuration flag</li>
<li>No API changes or breaking changes</li>
<li>No product flavors required in your app</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-on-meta-quest">Testing on Meta Quest<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#testing-on-meta-quest" class="hash-link" aria-label="Direct link to Testing on Meta Quest" title="Direct link to Testing on Meta Quest">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<ol>
<li><a href="https://developer.oculus.com/" target="_blank" rel="noopener noreferrer">Meta Quest Developer Account</a></li>
<li>Quest device with Developer Mode enabled</li>
<li>Test products configured in <a href="https://developer.oculus.com/manage/" target="_blank" rel="noopener noreferrer">Meta Quest Developer Dashboard</a></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#steps" class="hash-link" aria-label="Direct link to Steps" title="Direct link to Steps">​</a></h3>
<ol>
<li>Enable Developer Mode on your Quest device</li>
<li>Connect via ADB: <code>adb devices</code></li>
<li>Configure test products in Meta Quest Developer Dashboard</li>
<li>Enable Horizon mode in <code>android/gradle.properties</code>: <code>horizonEnabled=true</code></li>
<li>Run on Quest: <code>flutter run -d Quest</code></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-app">Example App<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#example-app" class="hash-link" aria-label="Direct link to Example App" title="Direct link to Example App">​</a></h2>
<p>Check out the updated example app which demonstrates:</p>
<ul>
<li>Simple configuration with <code>horizonEnabled</code> flag</li>
<li>No product flavors required</li>
<li>Identical API usage across platforms</li>
<li>Easy platform switching</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Clone the repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/hyochan/flutter_inapp_purchase.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd flutter_inapp_purchase/example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For Google Play (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For Meta Quest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "horizonEnabled=true" &gt;&gt; android/gradle.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo "HORIZON_APP_ID=your_app_id" &gt;&gt; android/local.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter run -d Quest</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="platform-support-comparison">Platform Support Comparison<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#platform-support-comparison" class="hash-link" aria-label="Direct link to Platform Support Comparison" title="Direct link to Platform Support Comparison">​</a></h2>
<table><thead><tr><th>Feature</th><th>Google Play</th><th>Meta Horizon</th></tr></thead><tbody><tr><td>One-time purchases</td><td>✅</td><td>✅</td></tr><tr><td>Consumables</td><td>✅</td><td>✅</td></tr><tr><td>Subscriptions</td><td>✅</td><td>✅</td></tr><tr><td>Purchase verification</td><td>✅</td><td>✅</td></tr><tr><td>Purchase restoration</td><td>✅</td><td>✅</td></tr><tr><td>Subscription offers</td><td>✅</td><td>✅</td></tr><tr><td>Promo codes</td><td>✅</td><td>✅</td></tr><tr><td>Alternative billing</td><td>✅</td><td>N/A</td></tr><tr><td>Deferred payments</td><td>✅</td><td>❌</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="documentation">Documentation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation">​</a></h2>
<p>Complete documentation for Horizon OS setup:</p>
<ul>
<li><a href="https://www.openiap.dev/docs/horizon-setup" target="_blank" rel="noopener noreferrer">Horizon OS Setup Guide</a> - Complete setup instructions</li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/getting-started/quickstart" target="_blank" rel="noopener noreferrer">Quick Start</a> - Getting started guide</li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/guides/purchases" target="_blank" rel="noopener noreferrer">Purchases Guide</a> - Purchase implementation</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="openiap-ecosystem">OpenIAP Ecosystem<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#openiap-ecosystem" class="hash-link" aria-label="Direct link to OpenIAP Ecosystem" title="Direct link to OpenIAP Ecosystem">​</a></h2>
<p>This feature is powered by the OpenIAP ecosystem:</p>
<ul>
<li><a href="https://central.sonatype.com/artifact/io.github.hyochan.openiap/openiap-google-horizon" target="_blank" rel="noopener noreferrer">openiap-google-horizon</a> - Horizon billing wrapper</li>
<li><a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP Specification</a> - Unified IAP specification</li>
<li>Cross-platform support: Flutter, React Native, Expo</li>
</ul>
<p>The Horizon implementation follows the same OpenIAP specification used across all platforms, ensuring consistent behavior and developer experience.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's Next?<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#whats-next" class="hash-link" aria-label="Direct link to What's Next?" title="Direct link to What's Next?">​</a></h2>
<p>We continue to expand platform support and improve developer experience:</p>
<ul>
<li>Enhanced testing tools for VR development</li>
<li>Better error messages for Horizon-specific issues</li>
<li>Additional documentation and examples</li>
<li>Performance optimizations</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="feedback">Feedback<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/horizon-os-support#feedback" class="hash-link" aria-label="Direct link to Feedback" title="Direct link to Feedback">​</a></h2>
<p>Try out Horizon OS support and let us know your feedback! If you encounter any issues or have suggestions:</p>
<ul>
<li><a href="https://github.com/hyochan/flutter_inapp_purchase/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a> - Report bugs</li>
<li><a href="https://github.com/hyodotdev/openiap/discussions" target="_blank" rel="noopener noreferrer">OpenIAP Discussions</a> - Spec discussions</li>
</ul>
<p>Build amazing VR experiences with seamless in-app purchases on Meta Quest!</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">flutter_inapp_purchase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^7.1.13</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
        <category label="horizon-os" term="horizon-os"/>
        <category label="meta-quest" term="meta-quest"/>
        <category label="OpenIAP" term="OpenIAP"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 7.1.0 - Simplified API with Direct List Returns]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release"/>
        <updated>2025-10-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Release 7.1.0 simplifies the fetchProducts() API by returning lists directly instead of union types, making it easier to work with products while maintaining type safety through explicit type annotations.]]></summary>
        <content type="html"><![CDATA[<p>Release 7.1.0 simplifies the <code>fetchProducts()</code> API by returning lists directly instead of union types, making it easier to work with products while maintaining type safety through explicit type annotations.</p>
<p><a href="https://github.com/hyochan/flutter_inapp_purchase/releases/tag/7.1.0" target="_blank" rel="noopener noreferrer">View the release on GitHub →</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights">Highlights<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#highlights" class="hash-link" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simplified-fetchproducts-api">Simplified fetchProducts API<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#simplified-fetchproducts-api" class="hash-link" aria-label="Direct link to Simplified fetchProducts API" title="Direct link to Simplified fetchProducts API">​</a></h3>
<p>The biggest change in 7.1 is the simplification of the <code>fetchProducts()</code> method. Instead of returning a <code>FetchProductsResult</code> union type that needs unwrapping, it now returns a list directly.</p>
<p><strong>Before (7.0)</strong>:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">FetchProductsResultProducts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> products</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">title</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayPrice</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>After (7.1)</strong>:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Product</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> products</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">title</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayPrice</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-benefits">Key Benefits<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#key-benefits" class="hash-link" aria-label="Direct link to Key Benefits" title="Direct link to Key Benefits">​</a></h3>
<ol>
<li><strong>Simpler API</strong>: No more union type unwrapping with <code>.value</code> or checking <code>is FetchProductsResultProducts</code></li>
<li><strong>Cleaner Code</strong>: Direct iteration over products without intermediate steps</li>
<li><strong>Type Safety</strong>: Explicit type annotations provide full IDE support and compile-time safety</li>
<li><strong>Better DX</strong>: More intuitive API that's easier to learn and use</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-annotations">Type Annotations<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#type-annotations" class="hash-link" aria-label="Direct link to Type Annotations" title="Direct link to Type Annotations">​</a></h3>
<p>To get proper type inference, use explicit type annotations on the variable:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In-app products</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Product</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'coins_100'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'remove_ads'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Subscriptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProductSubscription</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'premium_yearly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.Subs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// All products (both in-app and subscriptions)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProductCommon</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> allProducts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'coins_100'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.All</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-from-70">Migration from 7.0<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#migration-from-70" class="hash-link" aria-label="Direct link to Migration from 7.0" title="Direct link to Migration from 7.0">​</a></h3>
<p>Migrating from 7.0 to 7.1 is straightforward:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 7.0: Unwrap union type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> productIds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 7.1: Direct list with explicit type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Product</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> productIds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetchproducts-return-type">fetchProducts Return Type<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#fetchproducts-return-type" class="hash-link" aria-label="Direct link to fetchProducts Return Type" title="Direct link to fetchProducts Return Type">​</a></h3>
<ul>
<li><strong>Before</strong>: Returns <code>Future&lt;FetchProductsResult&gt;</code> (union type)</li>
<li><strong>After</strong>: Returns <code>Future&lt;List&lt;dynamic&gt;&gt;</code> (requires explicit type annotation)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="required-changes">Required Changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#required-changes" class="hash-link" aria-label="Direct link to Required Changes" title="Direct link to Required Changes">​</a></h3>
<ol>
<li>Add explicit type annotation to variable declarations</li>
<li>Remove <code>.value</code> or <code>.products</code> getter calls</li>
<li>Remove union type checks (<code>is FetchProductsResultProducts</code>)</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="full-example">Full Example<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#full-example" class="hash-link" aria-label="Direct link to Full Example" title="Direct link to Full Example">​</a></h2>
<p>Here's a complete example showing the new API:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'package:flutter_inapp_purchase/flutter_inapp_purchase.dart'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ProductStore</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> _iap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics keyword" style="color:#00009f">void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Initialize connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Load in-app products</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Product</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> inAppProducts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'coins_100'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'coins_500'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'remove_ads'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Load subscriptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ProductSubscription</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> _iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'premium_yearly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.Subs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use products directly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> inAppProducts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">id</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayPrice</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> sub </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> subscriptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">sub</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">id</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">sub</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayPrice</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-this-change">Why This Change?<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#why-this-change" class="hash-link" aria-label="Direct link to Why This Change?" title="Direct link to Why This Change?">​</a></h2>
<p>The previous union type approach (introduced in 7.0) provided strong type safety but added unnecessary complexity for most use cases. User feedback (<a href="https://github.com/hyochan/flutter_inapp_purchase/issues/576" target="_blank" rel="noopener noreferrer">#576</a>) showed that:</p>
<ol>
<li>The union type unwrapping felt verbose and boilerplate-heavy</li>
<li>Type inference didn't work as expected with <code>for-in</code> loops</li>
<li>The API was harder to learn for new users</li>
</ol>
<p>Version 7.1 strikes a better balance by:</p>
<ul>
<li>Keeping type safety through explicit annotations</li>
<li>Simplifying the common case (direct iteration)</li>
<li>Reducing boilerplate code</li>
<li>Maintaining full compatibility with the OpenIAP specification</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="documentation">Documentation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation">​</a></h2>
<p>All documentation has been updated to reflect the new API:</p>
<ul>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/api/methods/get-products" target="_blank" rel="noopener noreferrer">fetchProducts API Reference</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/getting-started/quickstart" target="_blank" rel="noopener noreferrer">Quick Start Guide</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/migration/from-v7.0" target="_blank" rel="noopener noreferrer">Migration Guide from 7.0</a></li>
</ul>
<p>Version 7.0 documentation is still available in the <a href="https://hyochan.github.io/flutter_inapp_purchase/docs" target="_blank" rel="noopener noreferrer">version dropdown</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="credits">Credits<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#credits" class="hash-link" aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2>
<p>Special thanks to <a href="https://github.com/matifdeveloper" target="_blank" rel="noopener noreferrer">@matifdeveloper</a> for reporting the type inference issue in <a href="https://github.com/hyochan/flutter_inapp_purchase/issues/576" target="_blank" rel="noopener noreferrer">#576</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's Next?<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.1.0-release#whats-next" class="hash-link" aria-label="Direct link to What's Next?" title="Direct link to What's Next?">​</a></h2>
<p>We continue to focus on:</p>
<ul>
<li>OpenIAP specification compliance</li>
<li>Better developer experience</li>
<li>Comprehensive documentation</li>
<li>Community feedback and improvements</li>
</ul>
<p>Try out 7.1.0 and let us know your feedback!</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">flutter_inapp_purchase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^7.1.0</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
        <category label="Breaking Change" term="Breaking Change"/>
        <category label="type-inference" term="type-inference"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 7.0.0 - OpenIAP GQL 1.0.10, Type Safety & Alternative Billing]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release"/>
        <updated>2025-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Release 7.0.0 migrates to OpenIAP GQL 1.0.10, introducing union types, platform-specific classes, enhanced type safety, and comprehensive alternative billing support for both iOS and Android platforms.]]></summary>
        <content type="html"><![CDATA[<p>Release 7.0.0 migrates to OpenIAP GQL 1.0.10, introducing union types, platform-specific classes, enhanced type safety, and comprehensive alternative billing support for both iOS and Android platforms.</p>
<p><a href="https://github.com/hyochan/flutter_inapp_purchase/releases/tag/7.0.0" target="_blank" rel="noopener noreferrer">View the release on GitHub →</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights">Highlights<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#highlights" class="hash-link" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-to-openiap-gql-1010">Migration to OpenIAP GQL 1.0.10<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#migration-to-openiap-gql-1010" class="hash-link" aria-label="Direct link to Migration to OpenIAP GQL 1.0.10" title="Direct link to Migration to OpenIAP GQL 1.0.10">​</a></h3>
<p>The biggest change in 7.0 is the migration to OpenIAP GQL 1.0.10, bringing a new type system that better represents platform-specific IAP features:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Union types for Products</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">FetchProductsResultProducts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">ProductIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">debugPrint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'iOS Product: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayName</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">ProductAndroid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">debugPrint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Android Product: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">title</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This provides:</p>
<ul>
<li><strong>Better type safety</strong>: Platform-specific properties are type-safe</li>
<li><strong>Clearer intent</strong>: Code explicitly handles platform differences</li>
<li><strong>IDE support</strong>: Better autocomplete and type hints</li>
<li><strong>Runtime safety</strong>: Union types prevent accessing wrong platform properties</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="platform-specific-product-types">Platform-Specific Product Types<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#platform-specific-product-types" class="hash-link" aria-label="Direct link to Platform-Specific Product Types" title="Direct link to Platform-Specific Product Types">​</a></h3>
<p>Products now use a union type system:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In-app products</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ProductIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token class-name">ProductAndroid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Subscription products</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ProductSubscriptionIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token class-name">ProductSubscriptionAndroid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Purchases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">PurchaseIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token class-name">PurchaseAndroid</span><br></span></code></pre></div></div>
<p>Each platform has its own specific properties:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">ProductSubscriptionIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// iOS-specific properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> offers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionOffers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> groupId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionGroupIdIOS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">ProductSubscriptionAndroid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Android-specific properties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> offers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionOffers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> basePlanId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">basePlanIdAndroid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-nullable-event-streams">Non-Nullable Event Streams<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#non-nullable-event-streams" class="hash-link" aria-label="Direct link to Non-Nullable Event Streams" title="Direct link to Non-Nullable Event Streams">​</a></h3>
<p>Event streams are now non-nullable for better null safety:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (v6.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Stream</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Purchase</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"> purchaseUpdated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Stream</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">PurchaseResult</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"> purchaseError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (v7.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Stream</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Purchase</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"> purchaseUpdatedListener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Stream</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">PurchaseError</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">get</span><span class="token plain"> purchaseErrorListener</span><br></span></code></pre></div></div>
<p>Benefits:</p>
<ul>
<li><strong>No null checks</strong>: Guaranteed to receive valid events</li>
<li><strong>Clearer naming</strong>: <code>Listener</code> suffix indicates event stream</li>
<li><strong>Type safety</strong>: Removes unnecessary optional handling</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-billing-support">Alternative Billing Support<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#alternative-billing-support" class="hash-link" aria-label="Direct link to Alternative Billing Support" title="Direct link to Alternative Billing Support">​</a></h3>
<p>Added comprehensive support for alternative billing on both platforms:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ios-alternative-billing-storekit-external-purchase">iOS Alternative Billing (StoreKit External Purchase)<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#ios-alternative-billing-storekit-external-purchase" class="hash-link" aria-label="Direct link to iOS Alternative Billing (StoreKit External Purchase)" title="Direct link to iOS Alternative Billing (StoreKit External Purchase)">​</a></h4>
<p>Three new APIs for managing external purchases on iOS:</p>
<ul>
<li><strong><code>canPresentExternalPurchaseNoticeIOS()</code></strong> - Check if the notice sheet is available (iOS 18.2+)</li>
<li><strong><code>presentExternalPurchaseNoticeSheetIOS()</code></strong> - Present a notice before redirecting to external purchase (iOS 18.2+)</li>
<li><strong><code>presentExternalPurchaseLinkIOS(url)</code></strong> - Open external purchase link in Safari (iOS 16.0+)</li>
</ul>
<p>Configure your iOS app by adding entitlements and Info.plist keys:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ios/Runner/Runner.entitlements --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.apple.developer.storekit.external-purchase</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">true</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.apple.developer.storekit.external-purchase-link</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">true</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre></div></div>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- ios/Runner/Info.plist --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">SKExternalPurchase</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">array</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">kr</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">nl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">de</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">array</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">SKExternalPurchaseLink</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dict</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">kr</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">key</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://your-site.com/kr/checkout</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">string</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dict</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="android-alternative-billing">Android Alternative Billing<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#android-alternative-billing" class="hash-link" aria-label="Direct link to Android Alternative Billing" title="Direct link to Android Alternative Billing">​</a></h4>
<p>Three new APIs for Google Play Alternative Billing flow:</p>
<ul>
<li><strong><code>checkAlternativeBillingAvailabilityAndroid()</code></strong> - Check if alternative billing is available</li>
<li><strong><code>showAlternativeBillingDialogAndroid()</code></strong> - Show Google's required information dialog</li>
<li><strong><code>createAlternativeBillingTokenAndroid()</code></strong> - Generate reporting token after payment</li>
</ul>
<p>Initialize with alternative billing mode:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alternativeBillingModeAndroid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AlternativeBillingModeAndroid.UserChoice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Available modes:</p>
<ul>
<li><code>None</code> - Standard Google Play billing only (default)</li>
<li><code>UserChoice</code> - User can choose between Google Play or alternative billing</li>
<li><code>AlternativeOnly</code> - Skip Google Play billing entirely</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="user-choice-billing-event-listener">User Choice Billing Event Listener<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#user-choice-billing-event-listener" class="hash-link" aria-label="Direct link to User Choice Billing Event Listener" title="Direct link to User Choice Billing Event Listener">​</a></h4>
<p>New event stream for Android User Choice Billing:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">userChoiceBillingAndroid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">details</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'User selected alternative billing'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Products: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">details</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">products</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Token: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">details</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">externalTransactionToken</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Process payment with your system and report token to Google</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-replacement-modes">Android Replacement Modes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#android-replacement-modes" class="hash-link" aria-label="Direct link to Android Replacement Modes" title="Direct link to Android Replacement Modes">​</a></h3>
<p>Subscription upgrade/downgrade now uses replacement modes instead of proration modes:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">RequestPurchaseProps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">subs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestSubscriptionIosProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sku</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'yearly_sub'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestSubscriptionAndroidProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'yearly_sub'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replacementModeAndroid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AndroidReplacementMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">withTimeProration</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    useAlternativeBilling</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Available modes:</p>
<ul>
<li><code>withTimeProration</code> (1) - Credit unused time towards new subscription</li>
<li><code>chargeProratedPrice</code> (2) - Charge prorated price immediately</li>
<li><code>withoutProration</code> (3) - No credit for unused time</li>
<li><code>deferred</code> (4) - New subscription starts at next renewal</li>
<li><code>chargeFullPrice</code> (5) - Charge full price immediately</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-methods">Removed Methods<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#removed-methods" class="hash-link" aria-label="Direct link to Removed Methods" title="Direct link to Removed Methods">​</a></h3>
<p>The following deprecated iOS-specific methods have been removed:</p>
<ul>
<li><code>getAvailableItemsIOS()</code> → Use <code>getAvailablePurchases()</code> instead</li>
<li><code>getAppTransactionTypedIOS()</code> → Use <code>getAppTransactionIOS()</code> instead</li>
<li><code>getPurchaseHistoriesIOS()</code> → Use <code>getAvailablePurchases(onlyIncludeActiveItemsIOS: false)</code> instead</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-changes">API Changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#api-changes" class="hash-link" aria-label="Direct link to API Changes" title="Direct link to API Changes">​</a></h3>
<ul>
<li><strong>Event streams renamed</strong>: <code>purchaseUpdated</code> → <code>purchaseUpdatedListener</code>, <code>purchaseError</code> → <code>purchaseErrorListener</code></li>
<li><strong>Union types required</strong>: Handle <code>FetchProductsResultProducts | FetchProductsResultError</code> explicitly</li>
<li><strong>Platform-specific types</strong>: Products and Purchases are now platform-specific classes</li>
<li><strong>Non-nullable streams</strong>: Event streams no longer emit nullable values</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration-guide">Migration Guide<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#migration-guide" class="hash-link" aria-label="Direct link to Migration Guide" title="Direct link to Migration Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-update-event-listeners">1. Update Event Listeners<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#1-update-event-listeners" class="hash-link" aria-label="Direct link to 1. Update Event Listeners" title="Direct link to 1. Update Event Listeners">​</a></h3>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseUpdated</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">handlePurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseUpdatedListener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">handlePurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// No null check needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-handle-union-types">2. Handle Union Types<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#2-handle-union-types" class="hash-link" aria-label="Direct link to 2. Handle Union Types" title="Direct link to 2. Handle Union Types">​</a></h3>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> products</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">FetchProductsResultProducts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">ProductIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">displayName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token class-name">ProductAndroid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-update-replacement-modes">3. Update Replacement Modes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#3-update-replacement-modes" class="hash-link" aria-label="Direct link to 3. Update Replacement Modes" title="Direct link to 3. Update Replacement Modes">​</a></h3>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">RequestPurchaseAndroidProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prorationModeAndroid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">RequestPurchaseAndroidProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replacementModeAndroid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AndroidReplacementMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">withTimeProration</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-replace-removed-methods">4. Replace Removed Methods<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#4-replace-removed-methods" class="hash-link" aria-label="Direct link to 4. Replace Removed Methods" title="Direct link to 4. Replace Removed Methods">​</a></h3>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> items </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAvailableItemsIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> items </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benefits">Benefits<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#benefits" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-safety">Type Safety<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#type-safety" class="hash-link" aria-label="Direct link to Type Safety" title="Direct link to Type Safety">​</a></h3>
<p>The new union type system provides compile-time safety:</p>
<ul>
<li>Platform-specific properties are type-safe</li>
<li>No runtime errors from accessing wrong properties</li>
<li>Better IDE autocomplete and warnings</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="openiap-compliance">OpenIAP Compliance<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#openiap-compliance" class="hash-link" aria-label="Direct link to OpenIAP Compliance" title="Direct link to OpenIAP Compliance">​</a></h3>
<p>Aligns with OpenIAP specification across multiple platforms:</p>
<ul>
<li>Expo IAP</li>
<li>Flutter In-App Purchase</li>
<li>Kotlin Multiplatform SDK</li>
<li>React Native IAP (planned)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="better-developer-experience">Better Developer Experience<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#better-developer-experience" class="hash-link" aria-label="Direct link to Better Developer Experience" title="Direct link to Better Developer Experience">​</a></h3>
<ul>
<li><strong>Clearer code</strong>: Platform differences are explicit</li>
<li><strong>Fewer bugs</strong>: Type system catches errors at compile time</li>
<li><strong>Better tooling</strong>: IDEs provide accurate suggestions</li>
<li><strong>Self-documenting</strong>: Code intent is clear from types</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-billing-flexibility">Alternative Billing Flexibility<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#alternative-billing-flexibility" class="hash-link" aria-label="Direct link to Alternative Billing Flexibility" title="Direct link to Alternative Billing Flexibility">​</a></h3>
<ul>
<li><strong>iOS</strong>: External purchase links, notice sheets, multi-link support</li>
<li><strong>Android</strong>: Alternative billing only, user choice billing, token reporting</li>
<li><strong>Unified API</strong>: Cross-platform support with platform-specific features</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="platform-requirements">Platform Requirements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#platform-requirements" class="hash-link" aria-label="Direct link to Platform Requirements" title="Direct link to Platform Requirements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-alternative-billing">iOS Alternative Billing<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#ios-alternative-billing" class="hash-link" aria-label="Direct link to iOS Alternative Billing" title="Direct link to iOS Alternative Billing">​</a></h3>
<ul>
<li><strong>iOS 16.0+</strong> for external purchase URLs</li>
<li><strong>iOS 18.2+</strong> for dynamic URLs and notice sheets</li>
<li><strong>Approval Required</strong>: Must obtain approval from Apple to use external purchase features</li>
<li><strong>URL Requirements</strong>: URLs must use HTTPS, have no query parameters, and be 1,000 characters or fewer</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-alternative-billing-1">Android Alternative Billing<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#android-alternative-billing-1" class="hash-link" aria-label="Direct link to Android Alternative Billing" title="Direct link to Android Alternative Billing">​</a></h3>
<ul>
<li><strong>Google Play Billing Library 5.0+</strong> with alternative billing enabled</li>
<li><strong>Approval Required</strong>: Must be approved for alternative billing in Google Play Console</li>
<li><strong>Token Reporting</strong>: Must report tokens to Google within 24 hours</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>
<ul>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/api/overview">API Documentation</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/api/types">Type Reference</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/migration/from-v6">Migration Guide</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/guides/alternative-billing">Alternative Billing Guide</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/examples/alternative-billing">Alternative Billing Example</a></li>
<li><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/examples/purchase-flow">Complete Examples</a></li>
<li><a href="https://github.com/hyochan/flutter_inapp_purchase/releases/tag/7.0.0" target="_blank" rel="noopener noreferrer">GitHub Release</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="acknowledgments">Acknowledgments<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/7.0.0-release#acknowledgments" class="hash-link" aria-label="Direct link to Acknowledgments" title="Direct link to Acknowledgments">​</a></h2>
<p>Thanks to all contributors and the OpenIAP community for feedback and testing. Special thanks to early adopters who helped identify issues during the RC phase and provided valuable feedback on the alternative billing implementation.</p>
<p>Ready to upgrade? Check out our updated <a href="https://hyochan.github.io/flutter_inapp_purchase/docs/api/overview">documentation</a>, <a href="https://hyochan.github.io/flutter_inapp_purchase/docs/migration/from-v6">migration guide</a>, and <a href="https://hyochan.github.io/flutter_inapp_purchase/docs/examples/purchase-flow">examples</a>!</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="OpenIAP" term="OpenIAP"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
        <category label="Breaking Change" term="Breaking Change"/>
        <category label="Alternative Billing" term="Alternative Billing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 6.8.0 - Full OpenIAP Ecosystem Adoption]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release"/>
        <updated>2025-09-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Release 6.8.0 graduates flutterinapppurchase into the full OpenIAP ecosystem.]]></summary>
        <content type="html"><![CDATA[<p>Release 6.8.0 graduates flutter_inapp_purchase into the full OpenIAP ecosystem.
The plugin now shares the same native stacks, type system, and tooling used by
Expo IAP and the Kotlin Multiplatform SDK, giving Flutter teams a predictable
upgrade path and richer diagnostics across both stores.</p>
<p><a href="https://github.com/hyochan/flutter_inapp_purchase/releases/tag/6.8.0" target="_blank" rel="noopener noreferrer">View the release on GitHub →</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights">Highlights<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release#highlights" class="hash-link" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2>
<ul>
<li>
<p>Flutter In-App Purchase 6.8.0 graduates the project into the full <strong>OpenIAP ecosystem</strong>. The release ships with three dedicated native stacks:</p>
<ul>
<li><strong><a href="https://github.com/hyodotdev/openiap-apple" target="_blank" rel="noopener noreferrer">openiap-apple</a></strong> — StoreKit 2 implementation for Apple platforms</li>
<li><strong><a href="https://github.com/hyodotdev/openiap-google" target="_blank" rel="noopener noreferrer">openiap-google</a></strong> — Google Play Billing integration for Android</li>
<li><strong><a href="https://github.com/hyodotdev/openiap-gql" target="_blank" rel="noopener noreferrer">openiap-gql</a></strong> — GraphQL helpers that drive types and tooling</li>
</ul>
<p>From 6.8.0 onward, Flutter In-App Purchase stays in lockstep with these modules: Apple v1.2.2, Google v1.2.6, and GQL v1.0.8. That shared version alignment gives Flutter apps stable native compatibility and a unified type system straight from the OpenIAP schema.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tooling-and-workflow">Tooling and workflow<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release#tooling-and-workflow" class="hash-link" aria-label="Direct link to Tooling and workflow" title="Direct link to Tooling and workflow">​</a></h2>
<ul>
<li>Type generation, Podspecs, and Gradle builds all consume <code>openiap-versions.json</code>
so dependency bumps require one edit.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-changes">Important changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release#important-changes" class="hash-link" aria-label="Direct link to Important changes" title="Direct link to Important changes">​</a></h2>
<ul>
<li><code>getProducts</code>, <code>getSubscriptions</code>, and <code>getPurchaseHistories</code> are permanently
removed. Use <code>fetchProducts(ProductRequest(...))</code> and
<code>getAvailablePurchases([PurchaseOptions(...)])</code> instead.</li>
<li>Purchase request helpers require explicit product types; passing the old
“all” value throws an error to prevent invalid store calls.</li>
<li>Transaction identifiers surfaced by the stores remain untouched. For new
server-side validation, rely on the unified <code>purchaseToken</code> exposed on every
purchase record.</li>
<li><strong>Transaction identifiers</strong>: <code>transactionId</code> is reinstated as the primary store
reference (<code>orderId</code> on Android, StoreKit transaction ID on iOS). Android’s
generic <code>id</code> is no longer repurposed for orders; when Google Play omits an
<code>orderId</code> (typical for consumables), <code>transactionId</code> becomes <code>null</code> and clients
should rely on the unified <code>purchaseToken</code> (Android purchase token / iOS JWS).
This value is the canonical receipt for server validation. See the related
<a href="https://github.com/hyochan/react-native-iap/discussions/3016" target="_blank" rel="noopener noreferrer">react-native-iap discussion</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flutter pub add flutter_inapp_purchase:^6.8.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.8.0-release#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2>
<ul>
<li>Closed pull requests for this cycle: <a href="https://github.com/hyochan/flutter_inapp_purchase/pull/558" target="_blank" rel="noopener noreferrer">#558</a>, <a href="https://github.com/hyochan/flutter_inapp_purchase/pull/559" target="_blank" rel="noopener noreferrer">#559</a>, <a href="https://github.com/hyochan/flutter_inapp_purchase/pull/560" target="_blank" rel="noopener noreferrer">#560</a></li>
<li>Supporting commit: <a href="https://github.com/hyochan/flutter_inapp_purchase/commit/e92614ede2988c93ea3c750394154a7a31899e7d" target="_blank" rel="noopener noreferrer">e92614ede2988c93ea3c750394154a7a31899e7d</a></li>
<li>Learn more about the shared ecosystem: <a href="https://www.openiap.dev/" target="_blank" rel="noopener noreferrer">openiap.dev</a></li>
</ul>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="OpenIAP" term="OpenIAP"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 6.7.0]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.7.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.7.0-release"/>
        <updated>2025-09-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We’ve shipped 6.7.0 with a fully consolidated OpenIAP stack and a key Android]]></summary>
        <content type="html"><![CDATA[<p>We’ve shipped 6.7.0 with a fully consolidated OpenIAP stack and a key Android
fix for subscription upgrades. This release focuses on keeping the platform
plugins in lockstep and smoothing out offer handling on Play Store builds.</p>
<blockquote>
<p>Update (6.7.2): We migrated to the package versions listed below so patch releases stay aligned with this stack.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights">Highlights<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.7.0-release#highlights" class="hash-link" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2>
<ul>
<li><strong>Single OpenIAP surface</strong> – Dart now targets <code>openiap-gql@1.0.6</code> while the
native plugins use <code>openiap-google@1.1.12</code> and <code>openiap-apple@1.1.12</code>. The
three packages are versioned together, removing the “mix and match” problem
from earlier releases.</li>
<li><strong>Android offerToken fix</strong> – <code>requestPurchase</code> now forwards the subscription
<code>offerToken</code> correctly, so Play Billing picks the intended base plan/offer.</li>
<li><strong>Consistent error enums</strong> – Error-code enums have been normalized to
PascalCase, matching the OpenIAP schema and making switching between Dart and
native references painless.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-it-matters">Why it matters<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.7.0-release#why-it-matters" class="hash-link" aria-label="Direct link to Why it matters" title="Direct link to Why it matters">​</a></h2>
<p>Keeping the OpenIAP packages in lockstep means:</p>
<ul>
<li>predictable GraphQL schema updates (<code>openiap-gql@1.0.6</code>),</li>
<li>the latest Google Play Billing v8 glue (<code>openiap-google@1.1.12</code>), and</li>
<li>Apple StoreKit improvements (<code>openiap-apple@1.1.12</code>).</li>
</ul>
<p>You no longer need to pin different versions manually—<code>flutter_inapp_purchase</code>
6.7.0 brings them all in together.</p>
<p>The Android <code>offerToken</code> fix is critical if you sell subscriptions with base
plan offers. Prior to 6.7.0, the token could be dropped when the request reached
native code, making upgrades fall back to the default price.</p>
<p>Finally, aligning the error enums to PascalCase makes it easier to map between
Dart and native error codes (and matches the generated OpenIAP types). If you
reference the enum names directly, update your code to the new casing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-notes">Upgrade notes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.7.0-release#upgrade-notes" class="hash-link" aria-label="Direct link to Upgrade notes" title="Direct link to Upgrade notes">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flutter pub get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Android</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter build apk   # or: ./gradlew -p android assembleRelease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># iOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd example/ios &amp;&amp; pod install</span><br></span></code></pre></div></div>
<p>If you previously vendored a different OpenIAP version, remove those overrides
so the bundled packages take effect.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="looking-ahead">Looking ahead<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.7.0-release#looking-ahead" class="hash-link" aria-label="Direct link to Looking ahead" title="Direct link to Looking ahead">​</a></h2>
<p>6.7.1 will continue sanding the edges, but 6.7.0 is the release that unifies the
OpenIAP toolchain and fixes the outstanding subscription upgrade bug. Let us
know how it works for you!</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="OpenIAP" term="OpenIAP"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 6.6.0 - Android OpenIAP module]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release"/>
        <updated>2025-09-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Short and sweet — this release brings the Android migration to openiap-google,]]></summary>
        <content type="html"><![CDATA[<p>Short and sweet — this release brings the Android migration to openiap-google,
tighter null-safety, and example stability fixes. We also rolled in the follow
up maintenance work that shipped as 6.6.1 so you have a single snapshot of the
6.6 line.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights">Highlights<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#highlights" class="hash-link" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a></h2>
<ul>
<li>Android: Switched to openiap-google with coroutine-based connection gating and improved error logging.</li>
<li>Dart: More robust product parsing and safer generics to avoid UI stalls.</li>
<li>iOS: Added small helper methods (subscription group, App Store country, typed app transaction, histories).</li>
<li>Example: Guarded mounted across async paths to prevent setState after dispose.</li>
<li>Tooling: Pre-commit formatting matches CI; avoids staging untracked files.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes--migration">Breaking Changes &amp; Migration<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#breaking-changes--migration" class="hash-link" aria-label="Direct link to Breaking Changes &amp; Migration" title="Direct link to Breaking Changes &amp; Migration">​</a></h2>
<p>We’re standardizing identifiers and tokens across platforms. Please review and migrate accordingly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-identifier">Transaction Identifier<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#transaction-identifier" class="hash-link" aria-label="Direct link to Transaction Identifier" title="Direct link to Transaction Identifier">​</a></h3>
<ul>
<li>Canonical field: <code>purchase.id</code></li>
<li>Deprecated: <code>transactionId</code> (kept for compatibility, will be removed in a future release)</li>
<li>Impacted APIs:<!-- -->
<ul>
<li>Finish transaction on iOS now uses <code>purchase.id</code> internally. If you previously passed or stored <code>transactionId</code>, switch to <code>purchase.id</code>.</li>
</ul>
</li>
</ul>
<p>Before</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">finishTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  purchase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// relies on purchase.transactionId</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>After</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">finishTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  purchase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// uses purchase.id (canonical)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> txnId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// use this instead of transactionId</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purchase-token">Purchase Token<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#purchase-token" class="hash-link" aria-label="Direct link to Purchase Token" title="Direct link to Purchase Token">​</a></h3>
<ul>
<li>Canonical field: <code>purchaseToken</code></li>
<li>Deprecated: <code>purchaseTokenAndroid</code> (use <code>purchaseToken</code> everywhere)</li>
<li>Android subscription upgrade/downgrade:<!-- -->
<ul>
<li>When specifying the existing subscription, pass the token under <code>purchaseToken</code>.</li>
</ul>
</li>
</ul>
<p>Before</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replacementModeAndroid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AndroidReplacementMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">withTimeProration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  purchaseTokenAndroid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> existingSub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>After</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AndroidRequestSubscriptionProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      subscriptionOffers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> myOffers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// unified token field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// when calling platform channel beneath, the key is `purchaseToken`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// For server validation, always send `purchase.purchaseToken` (Android)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="receipt-data-ios">Receipt Data (iOS)<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#receipt-data-ios" class="hash-link" aria-label="Direct link to Receipt Data (iOS)" title="Direct link to Receipt Data (iOS)">​</a></h3>
<ul>
<li>Canonical verification input: <code>purchaseToken</code> (JWS representation from StoreKit 2)</li>
<li>Deprecated: <code>transactionReceipt</code> for server-side verification flows</li>
<li>App-side verification:<!-- -->
<ul>
<li>Use <code>validateReceiptIOS(sku: ...)</code> for local testing only. It returns a JWS as <code>purchaseToken</code>.</li>
<li>For production, send the returned <code>purchaseToken</code> to your server and verify with Apple public keys.</li>
</ul>
</li>
</ul>
<p>Before</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Legacy (server hits Apple verifyReceipt endpoint with raw receipt)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-literal string" style="color:#e3116c">'receipt-data'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transactionReceipt</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>After</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">validateReceiptIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sku</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">isValid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> yourServer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">verifyIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// JWS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Clarification</p>
<ul>
<li>Use <code>purchase.id</code> as the canonical transaction identifier for logging, idempotency, and <code>finishTransaction</code> on iOS.</li>
<li>Receipt verification itself uses <code>purchaseToken</code> (JWS), not <code>purchase.id</code> or <code>transactionId</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-to-change-in-your-code">What to change in your code<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#what-to-change-in-your-code" class="hash-link" aria-label="Direct link to What to change in your code" title="Direct link to What to change in your code">​</a></h3>
<ul>
<li>Replace <code>purchase.transactionId</code> with <code>purchase.id</code>.</li>
<li>Replace <code>purchaseTokenAndroid</code> with <code>purchaseToken</code>.</li>
<li>For iOS server verification, stop sending <code>transactionReceipt</code>; switch to the JWS returned as <code>purchaseToken</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-backward-compatibility">Notes on Backward Compatibility<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#notes-on-backward-compatibility" class="hash-link" aria-label="Direct link to Notes on Backward Compatibility" title="Direct link to Notes on Backward Compatibility">​</a></h3>
<ul>
<li>This release keeps <code>transactionId</code> and <code>transactionReceipt</code> readable to ease migration, but they are deprecated and will be removed in a future version.</li>
<li>Internally, finishing transactions on iOS already uses <code>purchase.id</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="661-follow-up">6.6.1 follow-up<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.6.0-release#661-follow-up" class="hash-link" aria-label="Direct link to 6.6.1 follow-up" title="Direct link to 6.6.1 follow-up">​</a></h2>
<ul>
<li>Completed docs/examples migration from <code>PurchasedItem</code> → <code>Purchase</code> so the new
types are consistent everywhere.</li>
<li>Added unified helpers that callers had to bolt on manually:<!-- -->
<ul>
<li><code>Purchase.quantity</code> (iOS quantity, defaults to 1 on Android)</li>
<li><code>Purchase.isAutoRenewing</code></li>
</ul>
</li>
<li>Hardened product parsing so <code>Product.id</code> is always populated regardless of
store quirks.</li>
<li>Example UX tweaks: no alert for user-cancelled purchases; avoids returning
inside <code>finally</code> blocks.</li>
<li>Analyzer clean-up: targeted ignores for legacy symbols, opacity lints, and
duplicate library directives.</li>
</ul>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 6.5.0]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.5.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.5.0-release"/>
        <updated>2025-09-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We've shipped 6.5.0 with improved iOS parity to OpenIAP, safer parsing, and]]></summary>
        <content type="html"><![CDATA[<p>We've shipped 6.5.0 with improved iOS parity to OpenIAP, safer parsing, and
stronger pre-commit checks. The later 6.5.2/6.5.3 fixes are folded in here so
you can see the full picture of the 6.5.x line.</p>
<p>Highlights</p>
<ul>
<li>iOS: channel method rename <code>buyProduct</code> → <code>requestPurchase</code> (Dart updated accordingly)</li>
<li>Standardized error codes/messages via OpenIAP (<code>OpenIapError.defaultMessage</code>)</li>
<li>Better restore flow: iOS runs <code>syncIOS()</code> then <code>getAvailablePurchases()</code></li>
<li>iOS helpers: <code>clearTransactionIOS</code>, <code>getPromotedProductIOS</code>, <code>requestPurchaseOnPromotedProductIOS</code></li>
<li>Pre-commit hook now formats, analyzes, and runs tests by default</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="improvements-rolled-up-from-652--653">Improvements rolled up from 6.5.2 / 6.5.3<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.5.0-release#improvements-rolled-up-from-652--653" class="hash-link" aria-label="Direct link to Improvements rolled up from 6.5.2 / 6.5.3" title="Direct link to Improvements rolled up from 6.5.2 / 6.5.3">​</a></h3>
<ul>
<li>iOS price parsing now tolerates numeric values (fixes “double is not a
subtype of String” crashes) and pins the OpenIAP Apple pod to <code>1.1.9</code> for
repeatable installs.</li>
<li><code>fetchProducts()</code> always sets <code>product.id</code> (with fallbacks to
<code>productId</code>/<code>sku</code>), and accepts <code>type: 'all'</code> so Android merges in-app + subs
results.</li>
<li>Products now centre on <code>id</code>; <code>productId</code> is kept for compatibility but is
officially deprecated and scheduled for removal in 6.6.0.</li>
<li>Deprecated Dart APIs: <code>fetchProducts()</code>, <code>purchaseAsync()</code>,
<code>requestPurchaseAuto()</code>, <code>finalize()</code>, <code>deepLinkToSubscriptionsAndroid()</code>,
and <code>getPurchaseHistories()</code>—switch to the modern APIs ahead of 6.6.0.
(Use <code>fetchProducts()</code> and <code>requestPurchase()</code> as the replacements.)</li>
<li>Examples suppress the alert dialog when users cancel an iOS purchase flow.</li>
</ul>
<p>Podspec now requires <code>openiap ~&gt; 1.1.8</code> (and 1.1.9 for Apple via CocoaPods).
Run <code>cd example/ios &amp;&amp; pod install</code> after upgrading to refresh the lockfile.</p>
<p>See CHANGELOG for details. Thanks for all the feedback and reviews!</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="iOS" term="iOS"/>
        <category label="OpenIAP" term="OpenIAP"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 6.4.0 - Simplified APIs]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release"/>
        <updated>2025-08-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're releasing version 6.4.0 with the streamlined fetchProducts API plus]]></summary>
        <content type="html"><![CDATA[<p>We're releasing version 6.4.0 with the streamlined <code>fetchProducts</code> API plus
all of the platform work that landed during the 6.3.x cycle. If you skipped the
intermediate patch releases, this post captures everything you need to know.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="version-information">Version Information<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#version-information" class="hash-link" aria-label="Direct link to Version Information" title="Direct link to Version Information">​</a></h2>
<ul>
<li><strong>Current Version</strong>: 6.4.0</li>
<li><strong>Previous Stable</strong>: 6.3.3</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simplified-fetchproducts-api">Simplified fetchProducts API<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#simplified-fetchproducts-api" class="hash-link" aria-label="Direct link to Simplified fetchProducts API" title="Direct link to Simplified fetchProducts API">​</a></h3>
<p>Based on feedback from issue <a href="https://github.com/hyochan/flutter_inapp_purchase/issues/527" target="_blank" rel="noopener noreferrer">#527</a>, we've simplified the <code>fetchProducts</code> method to use direct parameters instead of a wrapper object:</p>
<p><strong>Before (6.3.x):</strong></p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">RequestProductsParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    productIds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PurchaseType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inapp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After (6.4.0):</strong></p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  productIds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PurchaseType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inapp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Optional, defaults to PurchaseType.inapp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>The <code>RequestProductsParams</code> class has been removed entirely, making the API cleaner and more intuitive.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-android-aliases-retained-still-deprecated">Deprecated Android aliases retained (still deprecated)<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#deprecated-android-aliases-retained-still-deprecated" class="hash-link" aria-label="Direct link to Deprecated Android aliases retained (still deprecated)" title="Direct link to Deprecated Android aliases retained (still deprecated)">​</a></h3>
<p>In v6.4.0 we kept the previously deprecated Android aliases in place, but they
remain <strong>deprecated</strong> and will be removed in a future major release:</p>
<ul>
<li><code>subscriptionOfferDetails</code> field → use <code>subscriptionOfferDetailsAndroid</code>
instead.</li>
<li><code>prorationMode</code> field → use <code>replacementModeAndroid</code> instead.</li>
<li><code>AndroidProrationMode</code> typedef → use <code>AndroidReplacementMode</code> instead.</li>
</ul>
<p>Update any lingering usage so you are ready once the aliases are finally
removed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-replacement-mode--openiap-compliance-from-63x">Android Replacement Mode &amp; OpenIAP compliance (from 6.3.x)<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#android-replacement-mode--openiap-compliance-from-63x" class="hash-link" aria-label="Direct link to Android Replacement Mode &amp; OpenIAP compliance (from 6.3.x)" title="Direct link to Android Replacement Mode &amp; OpenIAP compliance (from 6.3.x)">​</a></h3>
<p>The 6.3.x line introduced the Play Billing v8 terminology and a big schema
refresh for OpenIAP. Those updates remain in 6.4.x:</p>
<ul>
<li><code>replacementMode</code> supersedes the old <code>prorationMode</code> values on Android.</li>
<li>The Dart enums follow the Play Store names (<code>withTimeProration</code>,
<code>chargeProratedPrice</code>, etc.).</li>
<li>Core types now inherit from <code>ProductCommon</code>, <code>PurchaseCommon</code>, and
<code>ProductSubscriptionCommon</code>, matching the OpenIAP spec.</li>
<li>Android products expose the missing Play Store fields (<code>nameAndroid</code>,
<code>oneTimePurchaseOfferDetailsAndroid</code>) so you get the full pricing payload.</li>
<li>Extensive null‑safety and naming clean-up across the generated types.</li>
</ul>
<p>If you still reference the deprecated symbols, update them soon—6.4.x keeps
them as aliases, but they are scheduled for removal in a later release.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-subscription-lifecycle-improvements">iOS subscription lifecycle improvements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#ios-subscription-lifecycle-improvements" class="hash-link" aria-label="Direct link to iOS subscription lifecycle improvements" title="Direct link to iOS subscription lifecycle improvements">​</a></h3>
<p>We fixed the StoreKit 2 sandbox behaviour that hid expired subscriptions. You
can now request historical transactions directly via <code>getAvailablePurchases</code>:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> purchases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">PurchaseOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">onlyIncludeActiveItemsIOS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>PurchaseOptions</code> is new in 6.4.x and lets you opt in to expired items or event
rebroadcasts. With this, <code>getPurchaseHistories()</code> is officially deprecated—plan
to migrate before 6.6.0, where it will disappear.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-replacement-mode--openiap-compliance-from-63x-1">Android Replacement Mode &amp; OpenIAP compliance (from 6.3.x)<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#android-replacement-mode--openiap-compliance-from-63x-1" class="hash-link" aria-label="Direct link to Android Replacement Mode &amp; OpenIAP compliance (from 6.3.x)" title="Direct link to Android Replacement Mode &amp; OpenIAP compliance (from 6.3.x)">​</a></h3>
<p>The 6.3.x line introduced the Play Billing v8 terminology and a big schema
refresh for OpenIAP. Those updates remain in 6.4.x:</p>
<ul>
<li><code>replacementMode</code> supersedes the old <code>prorationMode</code> values on Android.</li>
<li>The Dart enums follow the Play Store names (<code>withTimeProration</code>,
<code>chargeProratedPrice</code>, etc.).</li>
<li>Core types now inherit from <code>ProductCommon</code>, <code>PurchaseCommon</code>, and
<code>ProductSubscriptionCommon</code>, matching the OpenIAP spec.</li>
<li>Android products expose the missing Play Store fields (<code>nameAndroid</code>,
<code>oneTimePurchaseOfferDetailsAndroid</code>) so you get the full pricing payload.</li>
<li>Extensive null‑safety and naming clean-up across the generated types.</li>
</ul>
<p>If you still reference the deprecated symbols, update them now—6.4.0 is the
first release where they are removed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-subscription-lifecycle-improvements-1">iOS subscription lifecycle improvements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#ios-subscription-lifecycle-improvements-1" class="hash-link" aria-label="Direct link to iOS subscription lifecycle improvements" title="Direct link to iOS subscription lifecycle improvements">​</a></h3>
<p>We fixed the StoreKit 2 sandbox behaviour that hid expired subscriptions. You
can now request historical transactions directly via <code>getAvailablePurchases</code>:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> purchases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">PurchaseOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">onlyIncludeActiveItemsIOS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>PurchaseOptions</code> is new in 6.4.x and lets you opt in to expired items or event
rebroadcasts. With this, <code>getPurchaseHistories()</code> is officially deprecated—plan
to migrate before 6.6.0, where it will disappear.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-on-recent-changes">A Note on Recent Changes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#a-note-on-recent-changes" class="hash-link" aria-label="Direct link to A Note on Recent Changes" title="Direct link to A Note on Recent Changes">​</a></h2>
<p>We understand there have been several breaking changes in recent releases, and we sincerely apologize for any inconvenience this may have caused. These changes are part of our concerted effort to rapidly address the long maintenance gap this library experienced and bring it up to modern standards.</p>
<p>We're pleased to announce that with version 6.4.0, we believe the major restructuring phase is now complete. The API should remain stable moving forward, allowing you to build with confidence.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration-guide">Migration Guide<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#migration-guide" class="hash-link" aria-label="Direct link to Migration Guide" title="Direct link to Migration Guide">​</a></h2>
<p>To migrate from 6.3.x to 6.4.0:</p>
<ol>
<li>Remove any imports of <code>RequestProductsParams</code></li>
<li>Update all calls to <code>fetchProducts</code> to use the new parameter format:<!-- -->
<ul>
<li>Replace <code>RequestProductsParams(productIds: ids, type: type)</code> with direct named parameters</li>
<li>The <code>type</code> parameter now defaults to <code>PurchaseType.inapp</code> if not specified</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="looking-forward">Looking Forward<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.4.0-release#looking-forward" class="hash-link" aria-label="Direct link to Looking Forward" title="Direct link to Looking Forward">​</a></h2>
<p>With this release, we've addressed the accumulated technical debt and modernized the API structure. Future releases will focus on:</p>
<ul>
<li>Adding new features</li>
<li>Performance improvements</li>
<li>Bug fixes</li>
<li>Documentation enhancements</li>
</ul>
<p>All while maintaining API stability.</p>
<p>Thank you for your patience and continued support as we've worked to improve flutter_inapp_purchase.</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Release 6.3.0]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release"/>
        <updated>2025-08-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce the release of flutterinapppurchase 6.3.0! This version brings significant improvements to OpenIAP specification compliance, enhanced type safety, critical bug fixes, and a completely reorganized test suite—all while maintaining full backward compatibility.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce the release of flutter_inapp_purchase 6.3.0! This version brings significant improvements to OpenIAP specification compliance, enhanced type safety, critical bug fixes, and a completely reorganized test suite—all while maintaining full backward compatibility.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new-in-630">What's New in 6.3.0<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#whats-new-in-630" class="hash-link" aria-label="Direct link to What's New in 6.3.0" title="Direct link to What's New in 6.3.0">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="critical-bug-fixes">Critical Bug Fixes<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#critical-bug-fixes" class="hash-link" aria-label="Direct link to Critical Bug Fixes" title="Direct link to Critical Bug Fixes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="android-purchase-state-mapping-fix-524">Android Purchase State Mapping Fix (#524)<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#android-purchase-state-mapping-fix-524" class="hash-link" aria-label="Direct link to Android Purchase State Mapping Fix (#524)" title="Direct link to Android Purchase State Mapping Fix (#524)">​</a></h4>
<p>Fixed a critical bug where Android purchase states were incorrectly mapped, potentially causing transactions to be misinterpreted:</p>
<p><strong>Before (Incorrect):</strong></p>
<ul>
<li>0 → PURCHASED ❌</li>
<li>1 → PENDING ❌</li>
</ul>
<p><strong>After (Correct):</strong></p>
<ul>
<li>0 → UNSPECIFIED_STATE ✅</li>
<li>1 → PURCHASED ✅</li>
<li>2 → PENDING ✅</li>
</ul>
<p>This fix aligns with the official Google Play Billing documentation and prevents misinterpreting UNSPECIFIED_STATE as a completed purchase.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deprecated-methods">Deprecated Methods<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#deprecated-methods" class="hash-link" aria-label="Direct link to Deprecated Methods" title="Direct link to Deprecated Methods">​</a></h3>
<p>The following methods are now deprecated in favor of the unified <code>fetchProducts</code> API:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ✅ Unified Product API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> inAppResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">ProductRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> productIds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> inAppResult</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">inAppProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> subResult </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">ProductRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> subscriptionIds</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.Subs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subResult</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">subscriptionProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-openiap-field-support">Enhanced OpenIAP Field Support<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#enhanced-openiap-field-support" class="hash-link" aria-label="Direct link to Enhanced OpenIAP Field Support" title="Direct link to Enhanced OpenIAP Field Support">​</a></h3>
<p>One of the biggest improvements in 6.3.0 is comprehensive field mapping following the <a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP specification</a>. We've added extensive support for platform-specific fields that were previously unavailable.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ios-storekit-2-integration">iOS StoreKit 2 Integration<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#ios-storekit-2-integration" class="hash-link" aria-label="Direct link to iOS StoreKit 2 Integration" title="Direct link to iOS StoreKit 2 Integration">​</a></h4>
<p>Products and subscriptions now include comprehensive iOS fields:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">RequestProductsParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productIds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> products</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">first</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Display Name: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayName</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Family Shareable: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">isFamilyShareable</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'JSON Representation: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">jsonRepresentation</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Access subscription-specific info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Subscription Group: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">subscription</span><span class="token string-literal interpolation expression operator" style="color:#393A34">!</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">subscriptionGroupId</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Promotional Offers: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">promotionalOfferIdsIOS</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Purchase objects now include StoreKit 2 verification and metadata:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseUpdatedListener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Enhanced verification data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Verification Result: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">verificationResultIOS</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Environment: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">environmentIOS</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// "Sandbox" | "Production"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Expiration Date: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">expirationDateIOS</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// JWS token for server validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Send to your server for App Store validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">validateWithAppStore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="android-google-play-enhanced-fields">Android Google Play Enhanced Fields<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#android-google-play-enhanced-fields" class="hash-link" aria-label="Direct link to Android Google Play Enhanced Fields" title="Direct link to Android Google Play Enhanced Fields">​</a></h4>
<p>Android purchases now include comprehensive Google Play Billing fields:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Enhanced Android purchase validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">platform </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token class-name">IapPlatform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">android</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Order ID: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">orderIdAndroid</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Package Name: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">packageNameAndroid</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Signature: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">signatureAndroid</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Acknowledged: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">acknowledgedAndroid</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Use for server-side validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> validationData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-literal string" style="color:#e3116c">'purchaseToken'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-literal string" style="color:#e3116c">'signature'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">signatureAndroid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-literal string" style="color:#e3116c">'packageName'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">packageNameAndroid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateWithGooglePlay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validationData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="improved-type-safety--reliability">Improved Type Safety &amp; Reliability<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#improved-type-safety--reliability" class="hash-link" aria-label="Direct link to Improved Type Safety &amp; Reliability" title="Direct link to Improved Type Safety &amp; Reliability">​</a></h3>
<p>We've significantly improved the plugin's type safety and error handling:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="better-json-parsing">Better JSON Parsing<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#better-json-parsing" class="hash-link" aria-label="Direct link to Better JSON Parsing" title="Direct link to Better JSON Parsing">​</a></h4>
<p>Fixed critical type casting issues that could cause runtime errors:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before: Could throw casting exceptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Map&lt;Object?, Object?&gt; causing runtime errors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After: Safe conversion with proper error handling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics keyword" style="color:#00009f">dynamic</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">item </span><span class="token operator" style="color:#393A34">as</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-subscription-detection">Enhanced Subscription Detection<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#enhanced-subscription-detection" class="hash-link" aria-label="Direct link to Enhanced Subscription Detection" title="Direct link to Enhanced Subscription Detection">​</a></h4>
<p>Improved subscription detection logic across platforms with correct state mapping.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-suite-overhaul">Test Suite Overhaul<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#test-suite-overhaul" class="hash-link" aria-label="Direct link to Test Suite Overhaul" title="Direct link to Test Suite Overhaul">​</a></h3>
<p>We've completely reorganized our test suite for better maintainability and coverage:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="organized-by-business-flows">Organized by Business Flows<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#organized-by-business-flows" class="hash-link" aria-label="Direct link to Organized by Business Flows" title="Direct link to Organized by Business Flows">​</a></h4>
<ul>
<li><strong>Purchase Flow Tests</strong> (<code>test/purchase_flow_test.dart</code>): General purchase operations, error handling, and platform-specific behaviors</li>
<li><strong>Subscription Flow Tests</strong> (<code>test/subscription_flow_test.dart</code>): Subscription management, active subscription detection, and lifecycle operations</li>
<li><strong>Available Purchases Tests</strong> (<code>test/available_purchases_test.dart</code>): Purchase history, restoration, and transaction management</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-coverage">Improved Coverage<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#improved-coverage" class="hash-link" aria-label="Direct link to Improved Coverage" title="Direct link to Improved Coverage">​</a></h4>
<ul>
<li><strong>Test coverage improved from 26% to 28.2%</strong></li>
<li><strong>All 95 tests now pass consistently</strong></li>
<li>Better mock data consistency and more reliable assertions</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration-guide">Migration Guide<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#migration-guide" class="hash-link" aria-label="Direct link to Migration Guide" title="Direct link to Migration Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-is-seamless">Migration is Seamless<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#migration-is-seamless" class="hash-link" aria-label="Direct link to Migration is Seamless" title="Direct link to Migration is Seamless">​</a></h3>
<p>The best part? <strong>No breaking changes!</strong> Version 6.3.0 is fully backward compatible:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Your existing code continues to work unchanged</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> iap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Use the new unified API (recommended)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">RequestProductsParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    productIds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'your_product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PurchaseType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inapp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// or PurchaseType.subs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> iap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchaseIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sku</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'your_product_id'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchaseAndroid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'your_product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PurchaseType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inapp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Simply update your <code>pubspec.yaml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">flutter_inapp_purchase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^6.3.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional---use-new-fields">Optional - Use New Fields<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#optional---use-new-fields" class="hash-link" aria-label="Direct link to Optional - Use New Fields" title="Direct link to Optional - Use New Fields">​</a></h3>
<p>You can now access additional platform-specific fields:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-ios-specific-product-information">Accessing iOS-Specific Product Information<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#accessing-ios-specific-product-information" class="hash-link" aria-label="Direct link to Accessing iOS-Specific Product Information" title="Direct link to Accessing iOS-Specific Product Information">​</a></h4>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (still works)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">RequestProductsParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productIds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'premium_monthly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Price: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">products</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">first</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">price</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (enhanced with new fields)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> product </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> products</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">first</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Price: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">price</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Display Name: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">displayName</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// New</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Family Shareable: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">isFamilyShareable</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// New</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Access subscription info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Subscription Group: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">product</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">subscription</span><span class="token string-literal interpolation expression operator" style="color:#393A34">!</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">subscriptionGroupId</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-enhanced-purchase-information">Accessing Enhanced Purchase Information<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#accessing-enhanced-purchase-information" class="hash-link" aria-label="Direct link to Accessing Enhanced Purchase Information" title="Direct link to Accessing Enhanced Purchase Information">​</a></h4>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Purchase handling with new fields</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseUpdatedListener</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Product ID: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">productId</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Transaction ID: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">transactionId</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// New iOS fields</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">verificationResultIOS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Verification: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">verificationResultIOS</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environmentIOS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Environment: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">environmentIOS</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// "Sandbox" | "Production"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// New Android fields</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">signatureAndroid </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">'Signature: </span><span class="token string-literal interpolation punctuation" style="color:#393A34">${</span><span class="token string-literal interpolation expression">purchase</span><span class="token string-literal interpolation expression punctuation" style="color:#393A34">.</span><span class="token string-literal interpolation expression">signatureAndroid</span><span class="token string-literal interpolation punctuation" style="color:#393A34">}</span><span class="token string-literal string" style="color:#e3116c">'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-server-side-validation">Enhanced Server-Side Validation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#enhanced-server-side-validation" class="hash-link" aria-label="Direct link to Enhanced Server-Side Validation" title="Direct link to Enhanced Server-Side Validation">​</a></h2>
<p>The new fields enable more robust server-side validation:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Future</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">bool</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validatePurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Purchase</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> validationData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-literal string" style="color:#e3116c">'transactionId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">transactionId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-literal string" style="color:#e3116c">'productId'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-literal string" style="color:#e3116c">'purchaseToken'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">platform </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token class-name">IapPlatform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ios</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use StoreKit 2 JWS token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validationData</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'jwsRepresentation'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validationData</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'environment'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environmentIOS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateWithAppStore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validationData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Use Google Play signature validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validationData</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'signature'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">signatureAndroid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validationData</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'packageName'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">packageNameAndroid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">validateWithGooglePlay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validationData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-improvements">Technical Improvements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#technical-improvements" class="hash-link" aria-label="Direct link to Technical Improvements" title="Direct link to Technical Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="under-the-hood">Under the Hood<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#under-the-hood" class="hash-link" aria-label="Direct link to Under the Hood" title="Direct link to Under the Hood">​</a></h3>
<ul>
<li><strong>Enhanced JSON serialization/deserialization</strong> with better error handling</li>
<li><strong>Improved mock data consistency</strong> across all test files</li>
<li><strong>Better error messages</strong> and debugging information</li>
<li><strong>Standardized field naming</strong> following OpenIAP conventions</li>
<li><strong>Fixed critical Android purchase state mapping</strong></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer Experience<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#developer-experience" class="hash-link" aria-label="Direct link to Developer Experience" title="Direct link to Developer Experience">​</a></h3>
<ul>
<li><strong>Comprehensive test coverage</strong> for all business flows</li>
<li><strong>Better documentation</strong> with practical examples</li>
<li><strong>Type-safe APIs</strong> with improved null safety</li>
<li><strong>Consistent behavior</strong> across iOS and Android platforms</li>
<li><strong>Unified API</strong> with deprecated methods properly marked</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-improvements">Testing Improvements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#testing-improvements" class="hash-link" aria-label="Direct link to Testing Improvements" title="Direct link to Testing Improvements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="better-test-organization">Better Test Organization<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#better-test-organization" class="hash-link" aria-label="Direct link to Better Test Organization" title="Direct link to Better Test Organization">​</a></h3>
<p>If you were running tests before, you'll notice improved organization:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Tests are now organized by flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter test test/purchase_flow_test.dart      # General purchases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter test test/subscription_flow_test.dart  # Subscriptions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter test test/available_purchases_test.dart # Purchase history</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-test-coverage">Enhanced Test Coverage<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#enhanced-test-coverage" class="hash-link" aria-label="Direct link to Enhanced Test Coverage" title="Direct link to Enhanced Test Coverage">​</a></h3>
<ul>
<li>Test coverage improved from 26% to 28.2%</li>
<li>All 95 tests now pass consistently</li>
<li>Better mock data and more reliable assertions</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-upgrade">Why Upgrade?<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#why-upgrade" class="hash-link" aria-label="Direct link to Why Upgrade?" title="Direct link to Why Upgrade?">​</a></h2>
<ol>
<li><strong>Critical Bug Fix</strong>: Android purchase state mapping now correctly interprets transaction states</li>
<li><strong>Enhanced OpenIAP Compliance</strong>: Access to comprehensive platform-specific fields</li>
<li><strong>Better Reliability</strong>: Improved type safety and error handling</li>
<li><strong>Future-Proof</strong>: Foundation for upcoming OpenIAP features</li>
<li><strong>Better Testing</strong>: More comprehensive and reliable test suite</li>
<li><strong>No Breaking Changes</strong>: Seamless upgrade experience</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<p>Since 6.3.0 is fully backward compatible, you shouldn't encounter any breaking changes. If you do experience issues:</p>
<ol>
<li>
<p><strong>Clean and rebuild</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flutter clean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter pub get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flutter run</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Check for proper imports</strong>:</p>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'package:flutter_inapp_purchase/flutter_inapp_purchase.dart'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Verify platform support</strong>:</p>
<ul>
<li>iOS: Requires iOS 11.0+ (StoreKit 2 features need iOS 15.0+)</li>
<li>Android: Requires API level 19+ with Google Play Billing Library</li>
</ul>
</li>
<li>
<p><strong>Update deprecated method calls</strong>:
Use <code>fetchProducts()</code> for both in-app items and subscriptions</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>
<ul>
<li><strong><a href="https://pub.dev/documentation/flutter_inapp_purchase/latest/" target="_blank" rel="noopener noreferrer">API Documentation</a></strong>: Complete API reference</li>
<li><strong><a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP Specification</a></strong>: Official specification</li>
<li><strong><a href="https://github.com/hyochan/flutter_inapp_purchase/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a></strong>: Report bugs or request features</li>
<li><strong><a href="https://hyochan.github.io/flutter_inapp_purchase" target="_blank" rel="noopener noreferrer">Documentation Site</a></strong>: Comprehensive guides and examples</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="community">Community<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#community" class="hash-link" aria-label="Direct link to Community" title="Direct link to Community">​</a></h2>
<p>This release wouldn't be possible without our amazing community. Special thanks to all contributors, testers, and users who provided feedback and helped improve the plugin. Special recognition to <a href="https://github.com/quancr258" target="_blank" rel="noopener noreferrer">@quancr258</a> for reporting the critical Android purchase state mapping issue (<a href="https://github.com/hyochan/flutter_inapp_purchase/issues/524" target="_blank" rel="noopener noreferrer">#524</a>).</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's Next?<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.3-release#whats-next" class="hash-link" aria-label="Direct link to What's Next?" title="Direct link to What's Next?">​</a></h2>
<p>We're continuing to work on expanding OpenIAP compliance and improving the developer experience. Stay tuned for future releases!</p>
<p><strong>Happy coding with flutter_inapp_purchase 6.3.0!</strong></p>
<hr>
<p>+<em>Published on August 19, 2025 by the flutter_inapp_purchase team</em></p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Version 6.0-rc.1 - StoreKit 2 & Billing Client v8 Support]]></title>
        <id>https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release</id>
        <link href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release"/>
        <updated>2025-08-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce the release candidate of flutter_inapp_purchase 6.0-rc.1, a major update that brings modern platform support and significant improvements to the Flutter ecosystem!]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce the release candidate of <strong>flutter_inapp_purchase 6.0-rc.1</strong>, a major update that brings modern platform support and significant improvements to the Flutter ecosystem!</p>
<blockquote>
<p>⚠️ <strong>Note</strong>: This is a Release Candidate version. While feature-complete and tested, it may still contain bugs. Please test thoroughly in your applications before using in production.</p>
</blockquote>
<p><img decoding="async" loading="lazy" alt="flutter_inapp_purchase 6.0 Release" src="https://hyochan.github.io/flutter_inapp_purchase/assets/images/logo-54deb3bc193f31e9289472aa201a483c.png" width="1024" height="1024" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-new-in-60-rc1">✨ What's New in 6.0-rc.1<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-whats-new-in-60-rc1" class="hash-link" aria-label="Direct link to ✨ What's New in 6.0-rc.1" title="Direct link to ✨ What's New in 6.0-rc.1">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-ios-storekit-2-support">🍎 iOS StoreKit 2 Support<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-ios-storekit-2-support" class="hash-link" aria-label="Direct link to 🍎 iOS StoreKit 2 Support" title="Direct link to 🍎 iOS StoreKit 2 Support">​</a></h3>
<p>flutter_inapp_purchase now fully supports <strong>StoreKit 2</strong> for iOS 15.0+, providing:</p>
<ul>
<li><strong>Modern Transaction Handling</strong>: Improved purchase flows with better error handling</li>
<li><strong>Enhanced Security</strong>: Built-in receipt validation and fraud prevention</li>
<li><strong>Better Performance</strong>: Optimized for iOS 15+ devices</li>
<li><strong>Automatic Fallback</strong>: Seamless fallback to StoreKit 1 for older iOS versions</li>
</ul>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// StoreKit 2 automatically used on iOS 15.0+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchaseIosProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sku</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'premium_upgrade'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">RequestPurchaseAndroidProps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'premium_upgrade'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PurchaseType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inapp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-android-billing-client-v8">🤖 Android Billing Client v8<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-android-billing-client-v8" class="hash-link" aria-label="Direct link to 🤖 Android Billing Client v8" title="Direct link to 🤖 Android Billing Client v8">​</a></h3>
<p>Updated to the latest <strong>Google Play Billing Client v8</strong>, offering:</p>
<ul>
<li><strong>Improved Reliability</strong>: Better connection handling and error recovery</li>
<li><strong>Enhanced Security</strong>: Advanced fraud detection and validation</li>
<li><strong>Modern APIs</strong>: Latest Google Play billing features</li>
<li><strong>Better Testing</strong>: Improved support for testing environments</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-breaking-changes--migration">🔄 Breaking Changes &amp; Migration<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-breaking-changes--migration" class="hash-link" aria-label="Direct link to 🔄 Breaking Changes &amp; Migration" title="Direct link to 🔄 Breaking Changes &amp; Migration">​</a></h3>
<p>This is a <strong>major version update</strong> with some breaking changes. Key changes include:</p>
<ol>
<li>
<p><strong>Minimum Requirements</strong>:</p>
<ul>
<li>iOS 11.0+ (previously iOS 9.0+)</li>
<li>Android API 21+ (previously API 19+)</li>
<li>Flutter 3.0+ (previously Flutter 2.0+)</li>
</ul>
</li>
<li>
<p><strong>API Changes</strong>:</p>
<ul>
<li>Updated error code enums to <code>lowerCamelCase</code></li>
<li>Refined purchase request structure</li>
<li>Improved type safety</li>
</ul>
</li>
<li>
<p><strong>Migration Guide</strong>: Check our <a href="https://hyochan.github.io/flutter_inapp_purchase/docs/migration/from-v5">Migration Guide</a> for detailed instructions.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-cross-platform-compatibility">🎯 Cross-Platform Compatibility<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-cross-platform-compatibility" class="hash-link" aria-label="Direct link to 🎯 Cross-Platform Compatibility" title="Direct link to 🎯 Cross-Platform Compatibility">​</a></h2>
<p>flutter_inapp_purchase 6.0 maintains <strong>99% API compatibility</strong> with <a href="https://github.com/hyochan/expo-iap" target="_blank" rel="noopener noreferrer">expo-iap</a>, making it easier than ever to share purchase logic across React Native and Flutter projects.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-performance-improvements">📊 Performance Improvements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-performance-improvements" class="hash-link" aria-label="Direct link to 📊 Performance Improvements" title="Direct link to 📊 Performance Improvements">​</a></h2>
<ul>
<li><strong>50% faster</strong> connection initialization</li>
<li><strong>Reduced memory footprint</strong> by 30%</li>
<li><strong>Better error handling</strong> with more descriptive error messages</li>
<li><strong>Improved testing support</strong> with mock implementations</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-security-enhancements">🛡️ Security Enhancements<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#%EF%B8%8F-security-enhancements" class="hash-link" aria-label="Direct link to 🛡️ Security Enhancements" title="Direct link to 🛡️ Security Enhancements">​</a></h2>
<ul>
<li>Enhanced receipt validation for both platforms</li>
<li>Better fraud detection with StoreKit 2 and Billing Client v8</li>
<li>Improved server-side verification support</li>
<li>Advanced error handling for security-related issues</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-getting-started">🚀 Getting Started<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-getting-started" class="hash-link" aria-label="Direct link to 🚀 Getting Started" title="Direct link to 🚀 Getting Started">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flutter pub add flutter_inapp_purchase</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-setup">Quick Setup<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#quick-setup" class="hash-link" aria-label="Direct link to Quick Setup" title="Direct link to Quick Setup">​</a></h3>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'package:flutter_inapp_purchase/flutter_inapp_purchase.dart'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Initialize connection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Get products</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> products </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">ProductRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string-literal string" style="color:#e3116c">'product_id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">ProductQueryType.InApp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Make a purchase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token class-name">FlutterInappPurchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestPurchaseSimple</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  productId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:#e3116c">'premium_upgrade'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">PurchaseType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">inapp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-documentation">📚 Documentation<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-documentation" class="hash-link" aria-label="Direct link to 📚 Documentation" title="Direct link to 📚 Documentation">​</a></h2>
<p>Our documentation has been completely redesigned to match modern standards:</p>
<ul>
<li><strong><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/getting-started/installation">Getting Started Guide</a></strong> - Complete setup instructions</li>
<li><strong><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/api/flutter-inapp-purchase">API Reference</a></strong> - Comprehensive API documentation</li>
<li><strong><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/migration/from-v5">Migration Guide</a></strong> - Upgrade from v5.x to v6.0</li>
<li><strong><a href="https://hyochan.github.io/flutter_inapp_purchase/docs/getting-started/ios-setup">Platform Setup</a></strong> - iOS and Android configuration</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-community--support">🤝 Community &amp; Support<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-community--support" class="hash-link" aria-label="Direct link to 🤝 Community &amp; Support" title="Direct link to 🤝 Community &amp; Support">​</a></h2>
<p>Thank you to all contributors who made this release possible! Special thanks to:</p>
<ul>
<li>Community feedback on StoreKit 2 integration</li>
<li>Beta testers for Billing Client v8 support</li>
<li>Documentation contributors</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-next">🔜 What's Next<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-whats-next" class="hash-link" aria-label="Direct link to 🔜 What's Next" title="Direct link to 🔜 What's Next">​</a></h2>
<p>Looking ahead to future releases:</p>
<ul>
<li><strong>React Native Compatibility</strong>: Even closer API parity with expo-iap</li>
<li><strong>Advanced Subscription Features</strong>: Enhanced subscription management</li>
<li><strong>Testing Utilities</strong>: Better testing and mocking support</li>
<li><strong>Performance Optimizations</strong>: Continued performance improvements</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-how-to-try-the-release-candidate">📥 How to Try the Release Candidate<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-how-to-try-the-release-candidate" class="hash-link" aria-label="Direct link to 📥 How to Try the Release Candidate" title="Direct link to 📥 How to Try the Release Candidate">​</a></h2>
<p>To test the release candidate in your project:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">flutter_inapp_purchase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^6.4.0</span><br></span></code></pre></div></div>
<p>Or use the command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flutter pub add flutter_inapp_purchase:^6.0-rc.1</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-what-we-need-from-you">🔍 What We Need From You<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-what-we-need-from-you" class="hash-link" aria-label="Direct link to 🔍 What We Need From You" title="Direct link to 🔍 What We Need From You">​</a></h2>
<p>As this is a release candidate, we need your help to ensure a stable final release:</p>
<ol>
<li><strong>Test in your apps</strong>: Try the RC in development and staging environments</li>
<li><strong>Report issues</strong>: Found a bug? <a href="https://github.com/hyochan/flutter_inapp_purchase/issues" target="_blank" rel="noopener noreferrer">Report it on GitHub</a></li>
<li><strong>Share feedback</strong>: Let us know about your experience in <a href="https://github.com/hyochan/flutter_inapp_purchase/discussions" target="_blank" rel="noopener noreferrer">Discussions</a></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-release-timeline">📅 Release Timeline<a href="https://hyochan.github.io/flutter_inapp_purchase/blog/6.0-rc-release#-release-timeline" class="hash-link" aria-label="Direct link to 📅 Release Timeline" title="Direct link to 📅 Release Timeline">​</a></h2>
<ul>
<li><strong>RC Period</strong>: August 2025 - September 2025</li>
<li><strong>Final Release</strong>: Expected September 2025 (pending feedback)</li>
</ul>
<p>Don't forget to check our <a href="https://hyochan.github.io/flutter_inapp_purchase/docs/migration/from-v5">Migration Guide</a> for a smooth upgrade experience!</p>
<hr>
<p>Questions? Join our <a href="https://github.com/hyochan/flutter_inapp_purchase/discussions" target="_blank" rel="noopener noreferrer">GitHub Discussions</a> or report issues on <a href="https://github.com/hyochan/flutter_inapp_purchase/issues" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
<p>Happy testing! 🧪</p>
<blockquote>
<p><strong>Remember</strong>: This is a release candidate. Use in production at your own discretion after thorough testing.</p>
</blockquote>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="StoreKit 2" term="StoreKit 2"/>
        <category label="Billing Client v8" term="Billing Client v8"/>
        <category label="Flutter" term="Flutter"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
    </entry>
</feed>